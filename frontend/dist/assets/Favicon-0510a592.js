import{p as N,dc as w,dd as F,de as y,j as e,ap as _,aq as D,Q as d}from"./index-f981d823.js";function S(){const[t,l]=N.useState([]),{data:m}=w(),a=m==null?void 0:m.data,u=a==null?void 0:a._id,[f,{isLoading:x}]=F(),[v,{isLoading:p}]=y(),b=async r=>{var o,i,h,g,j;r.preventDefault();const c=(o=t[0])==null?void 0:o.file;if(!c)return d.error("Icon is required");const n=new FormData;if(n.append("image",c),u){const s=await v({id:u,formData:n});s.error?d.error(((h=(i=s==null?void 0:s.error)==null?void 0:i.data)==null?void 0:h.message)||"Something went wrong when uploading"):(d.success("Favicon successfully updated"),l([]),console.log(s))}else{const s=await f(n);s.error?d.error(((j=(g=s==null?void 0:s.error)==null?void 0:g.data)==null?void 0:j.message)||"Something went wrong when uploading"):(d.success("Favicon successfully added"),l([]),console.log(s))}};return e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Favicon"})}),e.jsxs("form",{onSubmit:b,className:"p-4",children:[e.jsxs("div",{className:"w-full xl:w-1/2",children:[e.jsx("p",{className:"mb-1",children:"Icon"}),e.jsx("div",{children:e.jsx(_,{defaultValue:t,onChange:r=>l(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:c,dragProps:n})=>e.jsxs("div",{className:"items-center gap-10 rounded border border-dashed p-4 md:flex",...n,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(t==null?void 0:t.length)>0&&"mt-4"} `,children:t==null?void 0:t.map((o,i)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:o.data_url,alt:"",className:"h-20 w-32"}),e.jsx("div",{onClick:()=>c(i),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(D,{})})]},i))})]})})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:`https://api.torayvinobd.store/${a==null?void 0:a.favicon}`,alt:"favicon",className:"w-32"})}),e.jsx("div",{className:"mt-5",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{disabled:x||p,className:"primary_btn",children:x||p?"Loading...":a!=null&&a._id?"Update Favicon":"Add Favicon"})})})]})]})}export{S as default};
