import{y as f,p as h,j as e,ap as b,aq as v,Q as d}from"./index-f981d823.js";import{b as y}from"./brandApi-d50b0447.js";function C(){const g=f(),[s,l]=h.useState([]),[c,o]=h.useState(""),[j,{isLoading:m}]=y(),N=async()=>{var n,u,x,p;let t=(n=s[0])==null?void 0:n.file;if(!t)return d.error("Icon is required");if(c=="")return d.error("Name is required");const i={name:c},r=new FormData;r.append("image",t),r.append("data",JSON.stringify(i));const a=await j(r);(u=a==null?void 0:a.data)!=null&&u.success?(d.success("Brand added successfully"),l([]),o(""),g("/admin/brands")):(d.error(((p=(x=a==null?void 0:a.error)==null?void 0:x.data)==null?void 0:p.message)||"Something went wrong"),console.log(a))};return e.jsxs("div",{className:"rounded bg-base-100 p-4 xl:w-1/2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-content",children:"Icon"}),e.jsx(b,{value:s,onChange:t=>l(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:i,dragProps:r})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:t,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((a,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:a.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>i(n),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(v,{})})]},n))})]})})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{className:"text-neutral-content",children:"Brand name"}),e.jsx("input",{type:"text",onChange:t=>o(t.target.value)})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:N,className:"primary_btn text-sm",disabled:m,children:m?"Loading...":"Add Brand"})})]})}export{C as default};
