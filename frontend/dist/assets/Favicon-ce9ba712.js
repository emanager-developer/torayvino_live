import{m as E,dc as M,dd as Q,de as R,j as s,am as q,an as G,Q as d}from"./index-3d958e2c.js";function V(){const[r,l]=E.useState([]),{data:m}=M(),a=m==null?void 0:m.data,u=a==null?void 0:a._id,[A,{isLoading:x}]=Q(),[U,{isLoading:h}]=R(),k=async t=>{var c,o,p,g,j,f,v,b,N,w,F,y,_,D,L,S,$,C,I;t.preventDefault();const i=(c=r[0])==null?void 0:c.file;if(!i)return d.error("Icon is required");const n=new FormData;if(n.append("image",i),u){const e=await U({id:u,formData:n});e.error?d.error(`${((j=(g=(p=(o=e==null?void 0:e.error)==null?void 0:o.data)==null?void 0:p.error)==null?void 0:g[0])==null?void 0:j.message)||((b=(v=(f=e==null?void 0:e.error)==null?void 0:f.data)==null?void 0:v.error)==null?void 0:b.message)||((w=(N=e==null?void 0:e.error)==null?void 0:N.data)==null?void 0:w.message)||"Something went wrong!"}`):(d.success("Favicon successfully updated"),l([]),console.log(e))}else{const e=await A(n);e.error?d.error(`${((D=(_=(y=(F=e==null?void 0:e.error)==null?void 0:F.data)==null?void 0:y.error)==null?void 0:_[0])==null?void 0:D.message)||(($=(S=(L=e==null?void 0:e.error)==null?void 0:L.data)==null?void 0:S.error)==null?void 0:$.message)||((I=(C=e==null?void 0:e.error)==null?void 0:C.data)==null?void 0:I.message)||"Something went wrong!"}`):(d.success("Favicon successfully added"),l([]),console.log(e))}};return s.jsxs("section",{className:"rounded bg-base-100 shadow",children:[s.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:s.jsx("h3",{children:"Favicon"})}),s.jsxs("form",{onSubmit:k,className:"p-4",children:[s.jsxs("div",{className:"w-full xl:w-1/2",children:[s.jsx("p",{className:"mb-1",children:"Icon"}),s.jsx("div",{children:s.jsx(q,{defaultValue:r,onChange:t=>l(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:i,dragProps:n})=>s.jsxs("div",{className:"items-center gap-10 rounded border border-dashed p-4 md:flex",...n,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{onClick:t,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),s.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),s.jsx("div",{className:`${(r==null?void 0:r.length)>0&&"mt-4"} `,children:r==null?void 0:r.map((c,o)=>s.jsxs("div",{className:"image-item relative",children:[s.jsx("img",{src:c.data_url,alt:"",className:"h-20 w-32"}),s.jsx("div",{onClick:()=>i(o),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:s.jsx(G,{})})]},o))})]})})})]}),s.jsx("div",{className:"mt-4",children:s.jsx("img",{src:`https://api.torayvinobd.store/${a==null?void 0:a.favicon}`,alt:"favicon",className:"w-32"})}),s.jsx("div",{className:"mt-5",children:s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{disabled:x||h,className:"primary_btn",children:x||h?"Loading...":a!=null&&a._id?"Update Favicon":"Add Favicon"})})})]})]})}export{V as default};
