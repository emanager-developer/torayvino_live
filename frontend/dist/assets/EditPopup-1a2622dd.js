import{u as D,da as L,m as l,db as U,v as _,j as e,S as $,am as O,an as R,Q as P}from"./index-3d958e2c.js";function F(){const{id:m}=D(),{data:o,isLoading:S}=L(m),r=o==null?void 0:o.data,[s,I]=l.useState([]),[u,x]=l.useState(""),[h,g]=l.useState(""),[d,p]=l.useState(!0),[E,{isLoading:b}]=U(),j=_();l.useEffect(()=>{r&&(x(r.title||""),g(r.description||""),p(r.isActive))},[r]);const A=async()=>{var i,c,n,f,v,N,y,w,C,k;let t=new FormData;(i=s[0])!=null&&i.file&&t.append("image",s[0].file),t.append("title",u),t.append("description",h),t.append("isActive",d);const a=await E({id:m,formData:t});a.error?P.error(`${((v=(f=(n=(c=a==null?void 0:a.error)==null?void 0:c.data)==null?void 0:n.error)==null?void 0:f[0])==null?void 0:v.message)||((w=(y=(N=a==null?void 0:a.error)==null?void 0:N.data)==null?void 0:y.error)==null?void 0:w.message)||((k=(C=a==null?void 0:a.error)==null?void 0:C.data)==null?void 0:k.message)||"Something went wrong!"}`):(P.success("Popup updated successfully"),j("/admin/front-end/popup/all"))};return S?e.jsx($,{}):e.jsxs("section",{children:[e.jsx("div",{className:"rounded border-b bg-base-100 p-4",children:e.jsx("h1",{className:"font-medium text-neutral",children:"Edit Popup"})}),e.jsxs("div",{className:"rounded bg-base-100 shadow",children:[e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Popup Image"}),(r==null?void 0:r.image)&&s.length===0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-neutral-content mb-2",children:"Current Image:"}),e.jsx("img",{src:`https://api.torayvinobd.store${r.image}`,alt:r.title||"Current popup",className:"h-40 w-60 object-cover rounded border"})]}),e.jsx(O,{value:s,onChange:t=>I(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:a,dragProps:i})=>e.jsxs("div",{className:"w-full rounded border border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{onClick:t,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:s.length>0?"Change Image":"Choose New Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("p",{className:"text-xs text-neutral-content",children:s.length===0?"Leave empty to keep current image":"Recommended size: 600x500px"}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"}`,children:s==null?void 0:s.map((c,n)=>e.jsxs("div",{className:"image-item relative inline-block",children:[e.jsx("img",{src:c.data_url,alt:"",className:"h-40 w-60 object-cover rounded"}),e.jsx("div",{onClick:()=>a(n),className:"absolute right-2 top-2 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-red-500 text-white hover:bg-red-600",children:e.jsx(R,{})})]},n))})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Title (Optional)"}),e.jsx("input",{type:"text",value:u,onChange:t=>x(t.target.value),placeholder:"Enter popup title...",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:h,onChange:t=>g(t.target.value),placeholder:"Enter popup description...",rows:"3",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-primary focus:outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"status",checked:d,onChange:()=>p(!0),className:"text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"status",checked:!d,onChange:()=>p(!1),className:"text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Inactive"})]})]}),e.jsx("p",{className:"mt-1 text-xs text-neutral-content",children:"Note: Only one popup can be active at a time"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 border-t p-4",children:[e.jsx("button",{onClick:()=>j("/admin/front-end/popup/all"),className:"rounded bg-gray-200 px-6 py-2 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{disabled:b,onClick:A,className:"primary_btn",children:b?"Updating...":"Update Popup"})]})]})]})}export{F as default};
