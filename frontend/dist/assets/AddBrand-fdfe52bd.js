import{v as A,m as y,j as e,am as _,an as D,Q as d}from"./index-e0eec1b4.js";import{b as I}from"./brandApi-0d2f38fd.js";function L(){const w=A(),[s,l]=y.useState([]),[o,c]=y.useState(""),[B,{isLoading:m}]=I(),C=async()=>{var n,u,x,p,g,h,j,N,f,v,b;let r=(n=s[0])==null?void 0:n.file;if(!r)return d.error("Icon is required");if(o=="")return d.error("Name is required");const i={name:o},t=new FormData;t.append("image",r),t.append("data",JSON.stringify(i));const a=await B(t);(u=a==null?void 0:a.data)!=null&&u.success?(d.success("Brand added successfully"),l([]),c(""),w("/admin/brands")):(d.error(`${((h=(g=(p=(x=a==null?void 0:a.error)==null?void 0:x.data)==null?void 0:p.error)==null?void 0:g[0])==null?void 0:h.message)||((f=(N=(j=a==null?void 0:a.error)==null?void 0:j.data)==null?void 0:N.error)==null?void 0:f.message)||((b=(v=a==null?void 0:a.error)==null?void 0:v.data)==null?void 0:b.message)||"Something went wrong!"}`),console.log(a))};return e.jsxs("div",{className:"rounded bg-base-100 p-4 xl:w-1/2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-content",children:"Icon"}),e.jsx(_,{value:s,onChange:r=>l(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:i,dragProps:t})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...t,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((a,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:a.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>i(n),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(D,{})})]},n))})]})})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{className:"text-neutral-content",children:"Brand name"}),e.jsx("input",{type:"text",onChange:r=>c(r.target.value)})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:C,className:"primary_btn text-sm",disabled:m,children:m?"Loading...":"Add Brand"})})]})}export{L as default};
