import{m as c,j as t,I as _,G as C,Q as j}from"./index-3d958e2c.js";import{c as S}from"./reviewApi-8f1b041f.js";function k({editModal:r,setEditModal:o,review:s,product:e}){const[d,i]=c.useState(0),[g,m]=c.useState(void 0),y=Array(5).fill(0);c.useEffect(()=>{s!=null&&s.rating&&i(s==null?void 0:s.rating)},[s==null?void 0:s.rating]);const[N,{isLoading:u}]=S(),b=async l=>{var x,p,f,h;l.preventDefault();const n=s==null?void 0:s._id,R=l.target.description.value,E={rating:d,description:R,customer:(x=s==null?void 0:s.customer)==null?void 0:x._id},a=await N({id:n,data:E});(p=a==null?void 0:a.data)!=null&&p.success?(o(!1),j.success("Edit Success")):(j.error(((h=(f=a==null?void 0:a.error)==null?void 0:f.data)==null?void 0:h.message)||"Edit Failed"),console.log(a))};return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>o(!1),className:`modal_overlay ${r&&"modal_overlay_show"}`}),t.jsxs("form",{onSubmit:b,className:`modal w-[95%] p-4 sm:w-[500px] ${r&&"modal_show"}`,children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{children:e==null?void 0:e.title}),t.jsx("p",{className:"text-sm text-neutral-content",children:"Rate this product"})]}),t.jsx("div",{onClick:()=>o(!1),className:"cursor-pointer text-lg text-neutral-content duration-200 hover:text-primary",children:t.jsx(_,{})})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"flex items-center justify-center",children:y.map((l,n)=>t.jsx(C,{size:20,onClick:()=>i(n+1),onMouseOver:()=>m(n+1),onMouseLeave:()=>m(void 0),color:(g||d)>n?"#facc15":"#a9a9a9",style:{marginRight:10,cursor:"pointer"}},n))}),t.jsx("div",{className:"mt-5",children:t.jsx("textarea",{name:"description",rows:"4",className:"w-full rounded border p-2 text-sm text-neutral outline-none",placeholder:"Type your comment...",defaultValue:s==null?void 0:s.description})})]}),t.jsx("div",{className:"mt-1 p-3",children:t.jsx("button",{className:"rounded bg-primary px-4 py-1 text-base-100",disabled:u&&"disabled",children:u?"Loading...":"Edit"})})]})]})}export{k as R};
