import{m as O,u as G,cT as J,cU as P,v as T,j as e,am as A,an as R,Q as U}from"./index-e0eec1b4.js";function W(){var m,u,p,h,j,g,f;const[r,F]=O.useState([]),[s,K]=O.useState([]),{id:x}=G(),{data:a}=J(x),[Q]=P(),V=T(),q=async n=>{var N,b,v,y,w,k,C,D,E,B,$,M,_,I,L,S;n.preventDefault();const c=(N=r[0])==null?void 0:N.file,i=(b=s[0])==null?void 0:b.file,d=n.target.link.value,l=n.target.order.value,z={link:d,order:l},o=new FormData;(r==null?void 0:r.length)>0&&o.append("image",c),(s==null?void 0:s.length)>0&&o.append("mobileImage",i),o.append("data",JSON.stringify(z));const t=await Q({formData:o,id:x});(v=t==null?void 0:t.data)!=null&&v.success?(U.success(((y=t==null?void 0:t.data)==null?void 0:y.message)||"Banner updated successfully"),V("/admin/banner/main/all")):(U.error(Array.isArray((k=(w=t==null?void 0:t.error)==null?void 0:w.data)==null?void 0:k.error)&&((D=(C=t==null?void 0:t.error)==null?void 0:C.data)==null?void 0:D.error.length)>0?`${(($=(B=(E=t==null?void 0:t.error)==null?void 0:E.data)==null?void 0:B.error[0])==null?void 0:$.path)||""} ${((I=(_=(M=t==null?void 0:t.error)==null?void 0:M.data)==null?void 0:_.error[0])==null?void 0:I.message)||""}`.trim():((S=(L=t==null?void 0:t.error)==null?void 0:L.data)==null?void 0:S.message)||"Something went wrong!"),console.log(t))};return e.jsxs("section",{className:"rounded bg-base-100 shadow md:w-[600px]",children:[e.jsx("div",{className:"border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Edit Banner"})}),e.jsxs("form",{onSubmit:q,className:"flex flex-col gap-4 p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"pb-2 text-sm font-medium text-neutral",children:"Desktop Image"}),e.jsx("p",{className:"pb-1 text-xs text-neutral-content",children:"Max height (350px)"}),e.jsx(A,{value:r,onChange:n=>F(n),dataURLKey:"data_url",children:({onImageUpload:n,onImageRemove:c,dragProps:i})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[e.jsx("span",{onClick:n,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Change Desktop Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(r==null?void 0:r.length)>0&&"mt-4"} `,children:r==null?void 0:r.map((d,l)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:d.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>c(l),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(R,{})})]},l))})]})}),((m=a==null?void 0:a.data)==null?void 0:m.image)&&(r==null?void 0:r.length)===0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-neutral-content mb-2",children:"Current Desktop Image:"}),e.jsx("img",{src:`https://api.torayvinobd.store${(u=a==null?void 0:a.data)==null?void 0:u.image}`,alt:"current desktop banner",className:"w-40 rounded border"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"pb-2 text-sm font-medium text-neutral",children:"Mobile Image (Optional)"}),e.jsx("p",{className:"pb-1 text-xs text-neutral-content",children:"Optimized for mobile screens"}),e.jsx(A,{value:s,onChange:n=>K(n),dataURLKey:"data_url",children:({onImageUpload:n,onImageRemove:c,dragProps:i})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[e.jsx("span",{onClick:n,className:"cursor-pointer rounded-2xl bg-secondary px-4 py-1.5 text-sm text-base-100",children:"Change Mobile Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((d,l)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:d.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>c(l),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-secondary text-base-100",children:e.jsx(R,{})})]},l))})]})}),((p=a==null?void 0:a.data)==null?void 0:p.mobileImage)&&(s==null?void 0:s.length)===0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-neutral-content mb-2",children:"Current Mobile Image:"}),e.jsx("img",{src:`https://api.torayvinobd.store${(h=a==null?void 0:a.data)==null?void 0:h.mobileImage}`,alt:"current mobile banner",className:"w-40 rounded border"})]}),!((j=a==null?void 0:a.data)!=null&&j.mobileImage)&&(s==null?void 0:s.length)===0&&e.jsx("p",{className:"mt-2 text-xs text-neutral-content italic",children:"No mobile image set"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Link"}),e.jsx("input",{type:"text",name:"link",placeholder:"Enter Link",className:"w-full rounded border px-3 py-2 text-sm outline-none",defaultValue:(g=a==null?void 0:a.data)==null?void 0:g.link})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Order"}),e.jsx("input",{type:"text",name:"order",placeholder:"Enter Link",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(f=a==null?void 0:a.data)==null?void 0:f.order})]}),e.jsx("div",{className:"mt-6 flex justify-end border-t p-4",children:e.jsx("button",{className:"primary_btn",children:"Edit Campaign Banner"})})]})]})}export{W as default};
