import{m as S,v as F,cQ as K,cS as U,j as e,am as _,an as M,Q as x}from"./index-e0eec1b4.js";function G(){const[t,B]=S.useState([]),[r,E]=S.useState([]),O=F(),{data:m}=K(),l=m==null?void 0:m.data,[R,{isLoading:u}]=U(),$=async s=>{var p,h,g,j,f,N,b,v,y,w,k,A,C,D,L,I;s.preventDefault();const d=(p=t[0])==null?void 0:p.file,i=(h=r[0])==null?void 0:h.file;if(!d)return x.error("Please select a desktop image");const c=s.target,n=c.link.value,Q=c.order.value,q={link:n,order:Q},o=new FormData;o.append("image",d),i&&o.append("mobileImage",i),o.append("data",JSON.stringify(q));const a=await R(o);(g=a==null?void 0:a.data)!=null&&g.success?(x.success(((j=a==null?void 0:a.data)==null?void 0:j.message)||"Banner added successfully"),O("/admin/banner/main/all")):(x.error(Array.isArray((N=(f=a==null?void 0:a.error)==null?void 0:f.data)==null?void 0:N.error)&&((v=(b=a==null?void 0:a.error)==null?void 0:b.data)==null?void 0:v.error.length)>0?`${((k=(w=(y=a==null?void 0:a.error)==null?void 0:y.data)==null?void 0:w.error[0])==null?void 0:k.path)||""} ${((D=(C=(A=a==null?void 0:a.error)==null?void 0:A.data)==null?void 0:C.error[0])==null?void 0:D.message)||""}`.trim():((I=(L=a==null?void 0:a.error)==null?void 0:L.data)==null?void 0:I.message)||"Something went wrong!"),console.log(a))};return e.jsxs("section",{className:"rounded bg-base-100 shadow xl:w-[600px]",children:[e.jsx("div",{className:"border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Add Banner"})}),e.jsxs("form",{onSubmit:$,className:"p-4",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"pb-2 text-sm font-medium text-neutral",children:"Desktop Image (Required)"}),e.jsx("p",{className:"pb-1 text-xs text-neutral-content",children:"Max height (350px)"}),e.jsx(_,{value:t,onChange:s=>B(s),dataURLKey:"data_url",children:({onImageUpload:s,onImageRemove:d,dragProps:i})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[e.jsx("span",{onClick:s,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Desktop Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(t==null?void 0:t.length)>0&&"mt-4"} `,children:t==null?void 0:t.map((c,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>d(n),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(M,{})})]},n))})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"pb-2 text-sm font-medium text-neutral",children:"Mobile Image (Optional)"}),e.jsx("p",{className:"pb-1 text-xs text-neutral-content",children:"Optimized for mobile screens"}),e.jsx(_,{value:r,onChange:s=>E(s),dataURLKey:"data_url",children:({onImageUpload:s,onImageRemove:d,dragProps:i})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[e.jsx("span",{onClick:s,className:"cursor-pointer rounded-2xl bg-secondary px-4 py-1.5 text-sm text-base-100",children:"Choose Mobile Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(r==null?void 0:r.length)>0&&"mt-4"} `,children:r==null?void 0:r.map((c,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>d(n),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-secondary text-base-100",children:e.jsx(M,{})})]},n))})]})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Link"}),e.jsx("input",{type:"text",name:"link",placeholder:"Enter Link",className:"w-full rounded border px-3 py-2 text-sm outline-none"})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Order"}),e.jsx("input",{type:"number",name:"order",placeholder:"Enter Link",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(l==null?void 0:l.length)>0?(l==null?void 0:l.length)+1:1})]}),e.jsx("div",{className:"mt-6 flex justify-end border-t p-4",children:e.jsx("button",{disabled:u&&"disabled",className:"primary_btn",children:u?"Loading...":"Add Banner"})})]})]})}export{G as default};
