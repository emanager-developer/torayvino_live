import{v as L,u as $,m as k,j as e,am as A,an as F,Q as D}from"./index-3d958e2c.js";import{c as Q,d as R}from"./brandApi-6edcd915.js";function M(){var c,m,u,x;const S=L(),{id:l}=$(),[t,_]=k.useState([]),{data:s}=Q(l),[C,{isLoading:o}]=R(),I=async r=>{var g,h,j,f,N,b,v,y,w,B,E;r.preventDefault();let d=(g=t[0])==null?void 0:g.file;const i={name:r.target.name.value},n=new FormData;n.append("data",JSON.stringify(i)),d&&n.append("image",d);const a=await C({formData:n,id:l});(h=a==null?void 0:a.data)!=null&&h.success?(D.success("Brand Edited Successfully"),S("/admin/brands")):(D.error(`${((b=(N=(f=(j=a==null?void 0:a.error)==null?void 0:j.data)==null?void 0:f.error)==null?void 0:N[0])==null?void 0:b.message)||((w=(y=(v=a==null?void 0:a.error)==null?void 0:v.data)==null?void 0:y.error)==null?void 0:w.message)||((E=(B=a==null?void 0:a.error)==null?void 0:B.data)==null?void 0:E.message)||"Something went wrong!"}`),console.log(a))};return e.jsxs("form",{onSubmit:I,className:"rounded bg-base-100 p-4 sm:w-1/2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-content",children:"Icon"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(A,{value:t,onChange:r=>_(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:d,dragProps:p})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...p,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(t==null?void 0:t.length)>0&&"mt-4"} `,children:t==null?void 0:t.map((i,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:i.data_url,alt:"",className:"w-20"}),e.jsx("div",{onClick:()=>d(n),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(F,{})})]},n))})]})}),((c=s==null?void 0:s.data)==null?void 0:c.image)&&e.jsx("img",{src:`https://api.torayvinobd.store/${(m=s==null?void 0:s.data)==null?void 0:m.image}`,alt:(u=s==null?void 0:s.data)==null?void 0:u.name,className:"mt-4 w-20 rounded"})]})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{className:"text-neutral-content",children:"Brand name"}),e.jsx("input",{type:"text",name:"name",defaultValue:(x=s==null?void 0:s.data)==null?void 0:x.name})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"primary_btn text-sm",disabled:o&&"disabled",children:o?"Loading":"Edit Brand"})})]})}export{M as default};
