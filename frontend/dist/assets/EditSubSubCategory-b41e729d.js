import{u as R,v as V,m as c,b0 as $,j as a,S as k,Q}from"./index-3d958e2c.js";import{c as y,d as z}from"./subSubCategoryApi-48398f56.js";import{u as A}from"./subCategoryApi-b4ea3950.js";function J(){var h;const{id:m}=R(),U=V(),[l,p]=c.useState(null),[q,x]=c.useState(null),{data:n,isLoading:G}=y(m),s=n==null?void 0:n.data,{data:i}=$(),o=(i==null?void 0:i.data)||[],{data:u}=A({category:l}),d=l?(u==null?void 0:u.data)||[]:[];c.useEffect(()=>{var e,r;s&&(p((e=s==null?void 0:s.category)==null?void 0:e._id),x((r=s==null?void 0:s.subCategory)==null?void 0:r._id))},[s]);const[C,{isLoading:S}]=z(),D=async e=>{var j,v,g,f,N,_,b,w,E,L;e.preventDefault();const r=e.target.name.value,M=e.target.category.value,P=e.target.subCategory.value,t=await C({id:m,data:{name:r,category:M,subCategory:P}});(j=t==null?void 0:t.data)!=null&&j.success?(Q.success("Update success"),U("/admin/category/sub-sub-categories")):(Q.error(`${((N=(f=(g=(v=t==null?void 0:t.error)==null?void 0:v.data)==null?void 0:g.error)==null?void 0:f[0])==null?void 0:N.message)||((w=(b=(_=t==null?void 0:t.error)==null?void 0:_.data)==null?void 0:b.error)==null?void 0:w.message)||((L=(E=t==null?void 0:t.error)==null?void 0:E.data)==null?void 0:L.message)||"Something went wrong!"}`),console.log(t))};return G?a.jsx(k,{}):a.jsxs("form",{onSubmit:D,className:"rounded bg-base-100 p-4 xl:w-1/2",children:[a.jsxs("div",{className:"form_group mt-2",children:[a.jsx("p",{children:"Sub SubCategory Name"}),a.jsx("input",{type:"text",name:"name",defaultValue:(h=n==null?void 0:n.data)==null?void 0:h.name,required:!0})]}),a.jsxs("div",{className:"form_group mt-2",children:[a.jsx("p",{className:"text-neutral-content",children:"Category *"}),a.jsxs("select",{name:"category",required:!0,onChange:e=>p(e.target.value),value:l,children:[a.jsx("option",{value:"",children:"Select Category"}),o==null?void 0:o.map(e=>a.jsx("option",{value:e==null?void 0:e._id,children:e==null?void 0:e.name},e==null?void 0:e._id))]})]}),a.jsxs("div",{className:"form_group mt-2",children:[a.jsx("p",{className:"text-neutral-content",children:"Sub Category *"}),a.jsxs("select",{name:"subCategory",required:!0,value:q,onChange:e=>x(e.target.value),children:[a.jsx("option",{value:"",children:"Select Sub Category"}),(d==null?void 0:d.length)>0&&(d==null?void 0:d.map(e=>a.jsx("option",{value:e==null?void 0:e._id,children:e==null?void 0:e.name},e==null?void 0:e._id)))]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{className:"rounded bg-primary px-6 py-1.5 text-base-100",disabled:S&&"disabled",children:S?"Loading..":"Update"})})]})}export{J as default};
