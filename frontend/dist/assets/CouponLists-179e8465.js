import{j as s,S as _,L as y,H as M,cH as U,Q as x}from"./index-3d958e2c.js";import{a as E,b as T,c as $}from"./couponApi-59686a6a.js";function G(){var n,g;const{data:r,isLoading:A}=E(),[L]=T(),[D]=$(),S=async e=>{var m,j,d,a,l,i,f,c,C,b,w,v,N;if(window.confirm("Are you sure delete this coupon?")){const t=await L(e);(m=t==null?void 0:t.data)!=null&&m.success?x.success("Delete success"):(x.error(Array.isArray((d=(j=t==null?void 0:t.error)==null?void 0:j.data)==null?void 0:d.error)&&((l=(a=t==null?void 0:t.error)==null?void 0:a.data)==null?void 0:l.error.length)>0?`${((c=(f=(i=t==null?void 0:t.error)==null?void 0:i.data)==null?void 0:f.error[0])==null?void 0:c.path)||""} ${((w=(b=(C=t==null?void 0:t.error)==null?void 0:C.data)==null?void 0:b.error[0])==null?void 0:w.message)||""}`.trim():((N=(v=t==null?void 0:t.error)==null?void 0:v.data)==null?void 0:N.message)||"Something went wrong!"),console.log(t))}},k=async e=>{var d,a,l;const h=e==null?void 0:e._id,m={isActive:!(e!=null&&e.isActive)};if(window.confirm("Are you sure update this coupon status?")){const i=await D({id:h,coupon:m});(d=i==null?void 0:i.data)!=null&&d.success?x.success("Update success"):(x.error(((l=(a=i==null?void 0:i.error)==null?void 0:a.data)==null?void 0:l.message)||"Something went wrong"),console.log(i))}};return A?s.jsx(_,{}):s.jsxs("section",{className:"rounded bg-base-100 shadow",children:[s.jsxs("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:[s.jsx("h3",{children:"Coupon Lists"}),s.jsx(y,{to:"/admin/ecommerce-setting/coupons/add-coupon",className:"primary_btn",children:"Add New Coupon"})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"relative overflow-x-auto shadow-lg",children:s.jsxs("table",{className:"dashboard_table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Sl"}),s.jsx("th",{children:"Coupon Code"}),s.jsx("th",{children:"Discount"}),s.jsx("th",{children:"Minimum Ammount"}),s.jsx("th",{children:"Usage Limit"}),s.jsx("th",{children:"Available"}),s.jsx("th",{children:"Start Date-Time"}),s.jsx("th",{children:"End Date-Time"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Action"})]})}),s.jsx("tbody",{children:((n=r==null?void 0:r.data)==null?void 0:n.length)>0&&((g=r==null?void 0:r.data)==null?void 0:g.map((e,h)=>s.jsxs("tr",{children:[s.jsx("td",{children:h+1}),s.jsx("td",{children:e==null?void 0:e.code}),s.jsxs("td",{children:[e==null?void 0:e.discount,"%"]}),s.jsxs("td",{children:[e==null?void 0:e.minimumShopping,"tk"]}),s.jsx("td",{children:e!=null&&e.isUsageLimit?e==null?void 0:e.usageLimit:"No Limit"}),s.jsx("td",{children:e!=null&&e.isUsageLimit?e==null?void 0:e.availableCount:"No Limit"}),s.jsxs("td",{children:[e==null?void 0:e.startDate,"-",e==null?void 0:e.startTime]}),s.jsxs("td",{children:[e==null?void 0:e.endDate,"-",e==null?void 0:e.endTime]}),s.jsx("td",{children:s.jsx("button",{onClick:()=>k(e),children:s.jsx("input",{type:"checkbox",checked:e==null?void 0:e.isActive})})}),s.jsx("td",{children:s.jsxs("div",{className:"flex items-center gap-2 text-lg",children:[s.jsx(y,{to:`/admin/ecommerce-setting/coupons/edit-coupon/${e==null?void 0:e._id}`,className:"duration-200 hover:text-red-500",children:s.jsx(M,{})}),s.jsx("button",{onClick:()=>S(e==null?void 0:e._id),className:"duration-200 hover:text-red-500",children:s.jsx(U,{})})]})})]},e==null?void 0:e._id)))})]})})})]})}export{G as default};
