import{m as L,c as T,cc as U,cd as q,j as s,S as z,ay as G,L as _,bb as O,ce as R,K as H,Q as b}from"./index-3d958e2c.js";function J(){var S,k;const[v,A]=L.useState(1),$=10;let y={};y.page=v,y.limit=$;const{data:i,isLoading:w,isError:P,error:N}=T({...y}),t=(i==null?void 0:i.data)||[],[F]=U(),B=async e=>{var l,h,x,m,d,c,f,g,j,o,C;if(window.confirm("Are you sure delete this product?")){const n=await F(e);(l=n==null?void 0:n.data)!=null&&l.success?b.success((h=n==null?void 0:n.data)==null?void 0:h.message):(b.error(`${((c=(d=(m=(x=n==null?void 0:n.error)==null?void 0:x.data)==null?void 0:m.error)==null?void 0:d[0])==null?void 0:c.message)||((j=(g=(f=n==null?void 0:n.error)==null?void 0:f.data)==null?void 0:g.error)==null?void 0:j.message)||((C=(o=n==null?void 0:n.error)==null?void 0:o.data)==null?void 0:C.message)||"Something went wrong!"}`),console.log(n))}},[D,E]=L.useState(null),[K,{isLoading:M}]=q(),Q=async e=>{var l,h,x,m,d,c,f,g,j,o;E(e);const a=await K(e);(l=a==null?void 0:a.data)!=null&&l.success?b.success("Status updated success"):(b.error(`${((d=(m=(x=(h=a==null?void 0:a.error)==null?void 0:h.data)==null?void 0:x.error)==null?void 0:m[0])==null?void 0:d.message)||((g=(f=(c=a==null?void 0:a.error)==null?void 0:c.data)==null?void 0:f.error)==null?void 0:g.message)||((o=(j=a==null?void 0:a.error)==null?void 0:j.data)==null?void 0:o.message)||"Something went wrong!"}`),console.log(a))};let r=null;return w?r=s.jsx(z,{}):(!w&&P&&(r=s.jsx("p",{children:N==null?void 0:N.error})),!w&&!P&&(t==null?void 0:t.length)>0&&(r=t==null?void 0:t.map(e=>{var a,l;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:`https://api.torayvinobd.store/${e==null?void 0:e.thumbnail}`,alt:e==null?void 0:e.title,className:"h-9 w-9 rounded-lg",loading:"lazy"}),((a=e==null?void 0:e.title)==null?void 0:a.length)>30?(e==null?void 0:e.title.slice(0,30))+"...":e==null?void 0:e.title]})}),s.jsx("td",{children:(l=e==null?void 0:e.category)==null?void 0:l.name}),s.jsxs("td",{children:[e==null?void 0:e.price,"TK"]}),s.jsx("td",{children:e==null?void 0:e.stock}),s.jsx("td",{children:M&&D===(e==null?void 0:e._id)?s.jsx(G,{}):s.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[s.jsx("input",{checked:(e==null?void 0:e.featured)&&(e==null?void 0:e.featured),type:"checkbox",value:e==null?void 0:e.featured,className:"peer sr-only",onChange:()=>Q(e==null?void 0:e._id)}),s.jsx("div",{className:"peer h-[23px] w-11 rounded-full bg-gray-200 after:absolute after:start-[1px] after:top-[1.5px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white rtl:peer-checked:after:-translate-x-full"})]})}),s.jsx("td",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_,{to:`/admin/product/edit-product/${e==null?void 0:e._id}`,className:"duration-300 hover:text-green-700",children:s.jsx(O,{})}),s.jsx("button",{onClick:()=>B(e==null?void 0:e._id),className:"text-red-500",children:s.jsx(R,{})})]})})]},e==null?void 0:e._id)})),s.jsxs("div",{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx(_,{to:"/admin/product/add-product",className:"rounded bg-primary px-6 py-2 text-sm text-base-100",children:"Add New Product"})}),s.jsxs("div",{className:"flex min-h-[80vh] flex-col justify-between bg-base-100 shadow-lg",children:[s.jsx("div",{className:"relative overflow-x-auto",children:s.jsxs("table",{className:"dashboard_table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Product name"}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Base Price"}),s.jsx("th",{children:"Total Stock"}),s.jsx("th",{children:"Featured"}),s.jsx("th",{children:"Action"})]})}),s.jsx("tbody",{children:r||s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-sm text-red-500",children:"no product found!"})})})]})}),((S=i==null?void 0:i.meta)==null?void 0:S.pages)>1&&s.jsx(H,{pages:(k=i==null?void 0:i.meta)==null?void 0:k.pages,currentPage:v,setCurrentPage:A})]})]}))}export{J as default};
