import{p as y,g as B,cc as F,cd as D,j as s,S as E,aB as T,L as w,bc as $,ce as M,T as Q,Q as x}from"./index-f981d823.js";function q(){var g,b;const[d,N]=y.useState(1),v=10;let c={};c.page=d,c.limit=v;const{data:i,isLoading:m,isError:j,error:f}=B({...c}),t=(i==null?void 0:i.data)||[],[P]=F(),S=async e=>{var l,h,o;if(window.confirm("Are you sure delete this product?")){const n=await P(e);(l=n==null?void 0:n.data)!=null&&l.success?x.success((h=n==null?void 0:n.data)==null?void 0:h.message):(x.error(((o=n==null?void 0:n.data)==null?void 0:o.message)||"Something went wrong!"),console.log(n))}},[k,C]=y.useState(null),[L,{isLoading:_}]=D(),A=async e=>{var l,h;C(e);const a=await L(e);(l=a==null?void 0:a.data)!=null&&l.success?x.success("Status updated success"):(x.error(((h=a==null?void 0:a.data)==null?void 0:h.message)||"Something went wrong!"),console.log(a))};let r=null;return m?r=s.jsx(E,{}):(!m&&j&&(r=s.jsx("p",{children:f==null?void 0:f.error})),!m&&!j&&(t==null?void 0:t.length)>0&&(r=t==null?void 0:t.map(e=>{var a,l;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:`https://api.torayvinobd.store/${e==null?void 0:e.thumbnail}`,alt:e==null?void 0:e.title,className:"h-9 w-9 rounded-lg",loading:"lazy"}),((a=e==null?void 0:e.title)==null?void 0:a.length)>30?(e==null?void 0:e.title.slice(0,30))+"...":e==null?void 0:e.title]})}),s.jsx("td",{children:(l=e==null?void 0:e.category)==null?void 0:l.name}),s.jsxs("td",{children:[e==null?void 0:e.price,"TK"]}),s.jsx("td",{children:e==null?void 0:e.stock}),s.jsx("td",{children:_&&k===(e==null?void 0:e._id)?s.jsx(T,{}):s.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[s.jsx("input",{checked:(e==null?void 0:e.featured)&&(e==null?void 0:e.featured),type:"checkbox",value:e==null?void 0:e.featured,className:"peer sr-only",onChange:()=>A(e==null?void 0:e._id)}),s.jsx("div",{className:"peer h-[23px] w-11 rounded-full bg-gray-200 after:absolute after:start-[1px] after:top-[1.5px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white rtl:peer-checked:after:-translate-x-full"})]})}),s.jsx("td",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w,{to:`/admin/product/edit-product/${e==null?void 0:e._id}`,className:"duration-300 hover:text-green-700",children:s.jsx($,{})}),s.jsx("button",{onClick:()=>S(e==null?void 0:e._id),className:"text-red-500",children:s.jsx(M,{})})]})})]},e==null?void 0:e._id)})),s.jsxs("div",{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx(w,{to:"/admin/product/add-product",className:"rounded bg-primary px-6 py-2 text-sm text-base-100",children:"Add New Product"})}),s.jsxs("div",{className:"flex min-h-[80vh] flex-col justify-between bg-base-100 shadow-lg",children:[s.jsx("div",{className:"relative overflow-x-auto",children:s.jsxs("table",{className:"dashboard_table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Product name"}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Base Price"}),s.jsx("th",{children:"Total Stock"}),s.jsx("th",{children:"Featured"}),s.jsx("th",{children:"Action"})]})}),s.jsx("tbody",{children:r||s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-sm text-red-500",children:"no product found!"})})})]})}),((g=i==null?void 0:i.meta)==null?void 0:g.pages)>1&&s.jsx(Q,{pages:(b=i==null?void 0:i.meta)==null?void 0:b.pages,currentPage:d,setCurrentPage:N})]})]}))}export{q as default};
