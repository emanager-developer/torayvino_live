import{y as A,p as r,g as T,j as e,cI as P,Q as x}from"./index-f981d823.js";import{d as I}from"./couponApi-d935a6e5.js";function F(){const f=A(),[h,{isLoading:d}]=I(),[n,g]=r.useState(!1),[i,j]=r.useState(0),[l,N]=r.useState(!1),[c,b]=r.useState([]),{data:o}=T({}),v=o==null?void 0:o.data;console.log("productIds: ",c);const y=async a=>{var u,m,p;a.preventDefault();const t=a.target,w=t.code.value,S=t.minimumShopping.value,C=t.discount.value,L=t.startDate.value,D=t.startTime.value,E=t.endDate.value,k=t.endTime.value,q={code:w,minimumShopping:Number(S),isUsageLimit:n,usageLimit:Number(i),usageCount:0,availableCount:Number(i),discount:Number(C),startDate:L,startTime:D,endDate:E,endTime:k,isActive:!0,isProduct:!!l,productIds:c},s=await h(q);(u=s==null?void 0:s.data)!=null&&u.success?(x.success("Coupon add success"),t.reset(),f("/admin/ecommerce-setting/coupons")):(x.error(((p=(m=s==null?void 0:s.error)==null?void 0:m.data)==null?void 0:p.message)||"something went wrong"),console.log(s))};return e.jsxs("section",{className:"rounded bg-base-100 shadow md:w-[600px]",children:[e.jsx("div",{className:"border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Add New Coupon"})}),e.jsxs("form",{onSubmit:y,className:"p-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Coupon code"}),e.jsx("input",{type:"text",name:"code",placeholder:"Enter Code",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Minimum Shopping"}),e.jsx("input",{type:"number",name:"minimumShopping",placeholder:"Enter Minimum Shopping Ammount",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Discount (%)"}),e.jsx("input",{type:"number",name:"discount",placeholder:"Enter Discount %",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Usage Limit"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable if this item has a usage limit"})]}),e.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:n,onChange:()=>g(!n)}),e.jsx("div",{className:"peer h-6 w-11 rounded-full bg-gray-300 after:absolute after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-all peer-checked:bg-primary peer-checked:after:translate-x-full"})]})]}),n&&e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Usage Limit"}),e.jsx("input",{type:"number",name:"usageLimit",value:i,onChange:a=>j(Number(a.target.value)),placeholder:"Enter Usage Limit",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Product Specific"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable if this coupon is specific to certain products"})]}),e.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:l,onChange:()=>N(!l)}),e.jsx("div",{className:"peer h-6 w-11 rounded-full bg-gray-300 after:absolute after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-all peer-checked:bg-primary peer-checked:after:translate-x-full"})]})]}),l&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Products"}),e.jsx(P,{multi:!0,options:v,labelField:"title",valueField:"title",onChange:a=>b(a.map(t=>t._id)),values:c})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Start Time"}),e.jsx("input",{type:"time",name:"startTime",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"End Time"}),e.jsx("input",{type:"time",name:"endTime",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]})]}),e.jsx("div",{className:"mt-6 flex justify-end border-t p-4",children:e.jsx("button",{disabled:d&&"disabled",className:"primary_btn",children:d?"Loading...":"Add Coupon"})})]})]})}export{F as default};
