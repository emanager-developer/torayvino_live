import{m as _,l as T,j as s,J as k,K as q,Q as C}from"./index-e0eec1b4.js";import{b as G,a as J,R as K}from"./reviewApi-9af3832e.js";function B(){var m,x,u,p;const[r,I]=_.useState(1),[i,M]=_.useState(""),{loggedUser:o}=T(t=>t.user),n=o==null?void 0:o.data,l={};l.limit=5,l.page=r,l.description=i;const{data:e}=G({...l}),[P]=J(),$=Math.ceil(parseInt((m=e==null?void 0:e.meta)==null?void 0:m.total)/parseInt((x=e==null?void 0:e.meta)==null?void 0:x.limit)),E=async t=>{var h,g,j,f,b,N,y,R,A,S,D;if(!window.confirm("Are you sure you want to delete this review?"))return;const c=t==null?void 0:t._id,Q={customer:(h=t==null?void 0:t.customer)==null?void 0:h._id},a=await P({reviewId:c,data:Q});(g=a==null?void 0:a.data)!=null&&g.success?C.success("Review deleted successfully"):(C.error(`${((N=(b=(f=(j=a==null?void 0:a.error)==null?void 0:j.data)==null?void 0:f.error)==null?void 0:b[0])==null?void 0:N.message)||((A=(R=(y=a==null?void 0:a.error)==null?void 0:y.data)==null?void 0:R.error)==null?void 0:A.message)||((D=(S=a==null?void 0:a.error)==null?void 0:S.data)==null?void 0:D.message)||"Something went wrong!"}`),console.log(a))};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-1 flex items-center justify-between rounded-md bg-base-100 p-3 shadow-lg",children:[s.jsx("h1",{className:"text-lg",children:"AllReview"}),s.jsx("input",{type:"text",className:"rounded-md border px-2.5 py-1.5 placeholder:text-sm",placeholder:"Search by description",value:i,onChange:t=>M(t.target.value)})]}),s.jsx("div",{className:"rounded bg-base-100 p-3 shadow-lg",children:e!=null&&e.data&&((u=e==null?void 0:e.data)==null?void 0:u.length)>0?s.jsxs("div",{className:"flex flex-col gap-2",children:[(p=e==null?void 0:e.data)==null?void 0:p.map(t=>{var d,c;return s.jsxs("div",{className:"relative border-b p-3",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("img",{src:(n==null?void 0:n.image)===""||(n==null?void 0:n.image)===null?"/images/demo_user.jpg":`https://api.torayvinobd.store/${n==null?void 0:n.image}`,alt:"user",className:"h-9 w-9 rounded-full"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("p",{children:(d=t==null?void 0:t.user)==null?void 0:d.name}),s.jsx("p",{className:"text-sm text-neutral-content",children:(c=t==null?void 0:t.createdAt)==null?void 0:c.split("T")[0]})]}),s.jsx(K,{rating:t==null?void 0:t.rating})]})]}),s.jsx("p",{className:"mt-2.5 text-sm text-neutral-content",children:t==null?void 0:t.description}),s.jsx("div",{className:"absolute right-3 top-3",children:s.jsx("button",{onClick:()=>E(t),className:"text-lg text-neutral-content duration-200 hover:text-primary",children:s.jsx(k,{})})})]},t==null?void 0:t._id)}),s.jsx("div",{className:"p-3",children:s.jsx(q,{setCurrentPage:I,currentPage:r,pages:$})})]}):s.jsx("p",{className:"py-4 text-center text-red-500",children:"There have been no reviews yet."})})]})}export{B as default};
