import{y as O,p as r,cj as U,g as z,j as e,ap as H,c9 as v,Q as p}from"./index-f981d823.js";import{B as V}from"./Bundle-ce039579.js";function Y(){const $=O(),[d,w]=r.useState([]),[g,y]=r.useState(""),[j,k]=r.useState(0),[S,C]=r.useState(0),[q,Q]=r.useState(0),[c,N]=r.useState([]),[i,o]=r.useState([{title:"",description:""}]),[n,u]=r.useState([{question:"",answer:""}]),[h,_]=r.useState(!1),[A,K]=r.useState(0),[F,D]=r.useState(0),[G,{isLoading:P}]=U(),{data:f}=z(),b=(f==null?void 0:f.data)||[],J=async t=>{var m,B,E,I,L,R,M,T;if(t.preventDefault(),(d==null?void 0:d.length)<=0)return p.warning("Image is required");if(!g)return p.warning("Name is required");if(!j)return p.warning("Price is required");const l={name:g,price:j,discount:S,stock:q,products:c,specifications:i.filter(x=>x.title&&x.description),faq:n.filter(x=>x.question&&x.answer),isBundle:h,bundlePurchaseQuantity:h?A:0,bundleQuantity:h?F:0},a=new FormData;a.append("image",(m=d[0])==null?void 0:m.file),a.append("data",JSON.stringify(l));const s=await G(a);(B=s==null?void 0:s.data)!=null&&B.success?(p.success("Kit added successfully"),w([]),y(""),k(0),C(0),Q(0),N([]),o([{title:"",description:""}]),u([{question:"",answer:""}]),_(!1),K(0),D(0),$("/admin/kit/all-kits")):(p.error(((L=(I=(E=s==null?void 0:s.error)==null?void 0:E.data)==null?void 0:I.error)==null?void 0:L.length)>0?(T=(M=(R=s==null?void 0:s.error)==null?void 0:R.data)==null?void 0:M.error[0])==null?void 0:T.message:"Failed to add kit"),console.log(s))};return e.jsxs("div",{className:"add_kit rounded bg-base-100 shadow",children:[e.jsx("h3",{className:"border-b p-4 text-lg font-medium text-neutral",children:"Add Kit"}),e.jsxs("div",{className:"p-3 text-neutral-content",children:[e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Kit Image"}),e.jsx(H,{value:d,onChange:t=>w(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:l,dragProps:a})=>e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",...a,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 rounded border border-dashed p-3",children:[e.jsx("span",{onClick:t,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:"grid gap-4 rounded border border-dashed p-3 lg:grid-cols-3",children:d==null?void 0:d.map((s,m)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:s.data_url,alt:"kit",className:"h-20 w-full object-cover rounded"}),e.jsx("div",{onClick:()=>l(m),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(v,{})})]},m))})]})})]}),e.jsxs("div",{className:"form_group mt-3",children:[e.jsx("div",{className:"mt-3 rounded border p-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Kit Name"}),e.jsx("input",{type:"text",value:g,onChange:t=>y(t.target.value),placeholder:"Enter kit name",className:"w-full rounded border p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Price (à§³)"}),e.jsx("input",{type:"number",value:j,onChange:t=>k(Number(t.target.value)),placeholder:"Enter price",className:"w-full rounded border p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Discount (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:S,onChange:t=>C(Number(t.target.value)),placeholder:"Enter discount",className:"w-full rounded border p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Stock Quantity"}),e.jsx("input",{type:"number",min:"0",value:q,onChange:t=>Q(Number(t.target.value)),placeholder:"Enter stock",className:"w-full rounded border p-2"})]})]})}),e.jsx(V,{isBundle:h,setIsBundle:_,bundlePurchaseQuantity:A,setBundlePurchaseQuantity:K,bundleQuantity:F,setBundleQuantity:D}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Related Products"}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:[c.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border bg-gray-50 p-3",children:(b==null?void 0:b.length)>0?e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:b.map(t=>e.jsxs("div",{className:"flex items-center rounded border bg-white p-2 transition-colors hover:bg-purple-50",children:[e.jsx("input",{type:"checkbox",id:`product-${t._id}`,checked:c.includes(t._id),onChange:l=>{l.target.checked?N([...c,t._id]):N(c.filter(a=>a!==t._id))},className:"mr-3 h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:`product-${t._id}`,className:"flex-1 cursor-pointer text-sm text-gray-700",children:t.title})]},t._id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"No products available"})})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Specifications"}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("label",{className:"mb-1 ml-2 block w-[48%] text-sm font-medium text-gray-700",children:"Title"}),e.jsx("label",{className:"mb-1 block w-[50%] text-sm font-medium text-gray-700",children:"Description"})]}),i.map((t,l)=>e.jsxs("div",{className:"mb-3 flex gap-3 rounded border p-3",children:[e.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{children:e.jsx("textarea",{placeholder:"Specification Title",value:t.title,onChange:a=>{const s=[...i];s[l].title=a.target.value,o(s)},className:"w-full rounded border p-2",rows:2})}),e.jsx("div",{children:e.jsx("textarea",{placeholder:"Specification Description",value:t.description,onChange:a=>{const s=[...i];s[l].description=a.target.value,o(s)},className:"w-full rounded border p-2",rows:2})})]}),e.jsx("button",{type:"button",onClick:()=>{o(i.filter((a,s)=>s!==l))},className:"text-red-500 hover:text-red-700",children:e.jsx(v,{className:"h-7 w-7"})})]},l)),e.jsx("button",{type:"button",onClick:()=>o([...i,{title:"",description:""}]),className:"mt-2 rounded bg-blue-500 px-3 py-1 text-white",children:"Add Specification"})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"FAQ"}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("label",{className:"mb-1 ml-2 block w-[48%] text-sm font-medium text-gray-700",children:"Question"}),e.jsx("label",{className:"mb-1 block w-[50%] text-sm font-medium text-gray-700",children:"Answer"})]}),n.map((t,l)=>e.jsxs("div",{className:"mb-3 flex gap-3 rounded border p-3",children:[e.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{children:e.jsx("textarea",{placeholder:"Question",value:t.question,onChange:a=>{const s=[...n];s[l].question=a.target.value,u(s)},className:"w-full rounded border p-2",rows:2})}),e.jsx("div",{children:e.jsx("textarea",{placeholder:"Answer",value:t.answer,onChange:a=>{const s=[...n];s[l].answer=a.target.value,u(s)},className:"w-full rounded border p-2",rows:2})})]}),e.jsx("button",{type:"button",onClick:()=>{u(n.filter((a,s)=>s!==l))},className:"text-red-500 hover:text-red-700",children:e.jsx(v,{className:"h-7 w-7"})})]},l)),e.jsx("button",{type:"button",onClick:()=>u([...n,{question:"",answer:""}]),className:"mt-2 rounded bg-blue-500 px-3 py-1 text-white",children:"Add FAQ"})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:J,type:"submit",disabled:P,className:"rounded bg-primary px-10 py-2 text-base-100",children:P?"Loading...":"Add Kit"})})]})]})]})}export{Y as default};
