import{p as j,Z as K,ch as k,j as e,S as A,L as N,ci as F,O as M,c9 as P,Q as l}from"./index-f981d823.js";function $(){const[a,n]=j.useState(1),[c]=j.useState(10),{data:r,isLoading:f,refetch:w}=K({page:a,limit:c}),[b]=k(),x=(r==null?void 0:r.data)||[],d=(r==null?void 0:r.meta)||{},v=async t=>{var i,m,p,h,u,g,y;if(window.confirm("Are you sure you want to delete this kit?"))try{const s=await b(t);(i=s==null?void 0:s.data)!=null&&i.success?(l.success("Kit deleted successfully"),w()):l.error(((h=(p=(m=s==null?void 0:s.error)==null?void 0:m.data)==null?void 0:p.error)==null?void 0:h.length)>0?(y=(g=(u=s==null?void 0:s.error)==null?void 0:u.data)==null?void 0:g.error[0])==null?void 0:y.message:"Failed to update kit")}catch(s){l.error("Failed to delete kit"),console.log(s)}},o=Math.ceil(d.total/c);return f?e.jsx(A,{}):e.jsxs("div",{className:"rounded bg-base-100 shadow",children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-neutral",children:"All Kits (GKK)"}),e.jsxs(N,{to:"/admin/kit/add-kit",className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-base-100 hover:bg-primary/90",children:[e.jsx(F,{className:"h-4 w-4"}),"Add New Kit"]})]}),e.jsx("div",{className:"p-4",children:x.length===0?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No kits found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Kit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Discount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Products"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:x.map(t=>{var i;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"flex items-center",children:e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:`https://api.torayvinobd.store/${t.image}`,alt:t.name})})}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.slug})]}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["৳",t.price]}),t.discount>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["After discount: ৳",(t.price*(1-t.discount/100)).toFixed(0)]})]}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.discount>0?e.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:[t.discount,"% OFF"]}):e.jsx("span",{className:"text-xs text-gray-400",children:"No discount"})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${t.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.stock>0?`${t.stock} in stock`:"Out of stock"})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-2.5 py-0.5 text-xs font-medium text-purple-800",children:[((i=t.products)==null?void 0:i.length)||0," products"]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{to:`/admin/kit/edit/${t._id}`,className:"text-blue-600 hover:text-blue-900",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>v(t._id),className:"text-red-600 hover:text-red-900",children:e.jsx(P,{className:"h-5 w-5"})})]})})]},t._id)})})]})}),o>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(a-1)*c+1," to"," ",Math.min(a*c,d.total)," of ",d.total," ","results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n(a-1),disabled:a===1,className:"rounded bg-gray-200 px-3 py-1 text-sm disabled:opacity-50",children:"Previous"}),e.jsx("span",{className:"rounded bg-primary px-3 py-1 text-sm text-white",children:a}),e.jsx("button",{onClick:()=>n(a+1),disabled:a===o,className:"rounded bg-gray-200 px-3 py-1 text-sm disabled:opacity-50",children:"Next"})]})]})]})})]})}export{$ as default};
