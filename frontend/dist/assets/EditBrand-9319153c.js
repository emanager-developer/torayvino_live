import{y as w,u as E,p as D,j as e,ap as _,aq as C,Q as N}from"./index-f981d823.js";import{c as I,d as L}from"./brandApi-d50b0447.js";function $(){var o,m,u,x;const b=w(),{id:l}=E(),[s,v]=D.useState([]),{data:a}=I(l),[y,{isLoading:c}]=L(),B=async n=>{var h,g,j,f;n.preventDefault();let d=(h=s[0])==null?void 0:h.file;const i={name:n.target.name.value},r=new FormData;r.append("data",JSON.stringify(i)),d&&r.append("image",d);const t=await y({formData:r,id:l});(g=t==null?void 0:t.data)!=null&&g.success?(N.success("Brand Edited Successfully"),b("/admin/brands")):(N.error(((f=(j=t==null?void 0:t.error)==null?void 0:j.data)==null?void 0:f.message)||"An error occurred"),console.log(t))};return e.jsxs("form",{onSubmit:B,className:"rounded bg-base-100 p-4 sm:w-1/2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-content",children:"Icon"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(_,{value:s,onChange:n=>v(n),dataURLKey:"data_url",children:({onImageUpload:n,onImageRemove:d,dragProps:p})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...p,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:n,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((i,r)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:i.data_url,alt:"",className:"w-20"}),e.jsx("div",{onClick:()=>d(r),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(C,{})})]},r))})]})}),((o=a==null?void 0:a.data)==null?void 0:o.image)&&e.jsx("img",{src:`https://api.torayvinobd.store/${(m=a==null?void 0:a.data)==null?void 0:m.image}`,alt:(u=a==null?void 0:a.data)==null?void 0:u.name,className:"mt-4 w-20 rounded"})]})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{className:"text-neutral-content",children:"Brand name"}),e.jsx("input",{type:"text",name:"name",defaultValue:(x=a==null?void 0:a.data)==null?void 0:x.name})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"primary_btn text-sm",disabled:c&&"disabled",children:c?"Loading":"Edit Brand"})})]})}export{$ as default};
