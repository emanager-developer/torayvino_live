import{aj as E,k as $,l as y,m as f,_ as B,ak as V,j as e,S as A,al as L,am as T,an as U,L as O,Q as j}from"./index-e0eec1b4.js";function z(s){return E({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#8CBCD6",d:"M31,41H8c-2.2,0-4-1.8-4-4V11c0-2.2,1.8-4,4-4h32c2.2,0,4,1.8,4,4v17C44,35.2,38.2,41,31,41z"}},{tag:"circle",attr:{fill:"#B3DDF5",cx:"35",cy:"16",r:"3"}},{tag:"polygon",attr:{fill:"#9AC9E3",points:"20,16 9,32 31,32"}},{tag:"polygon",attr:{fill:"#B3DDF5",points:"31,22 23,32 39,32"}},{tag:"path",attr:{fill:"#E57373",d:"M47.7,29.1l-2.8-2.8c-0.4-0.4-1.1-0.4-1.6,0L42,27.6l4.4,4.4l1.3-1.3C48.1,30.3,48.1,29.6,47.7,29.1z"}},{tag:"rect",attr:{x:"27.1",y:"35.1",transform:"matrix(.707 -.707 .707 .707 -16.508 36.511)",fill:"#FF9800",width:"17.4",height:"6.2"}},{tag:"rect",attr:{x:"41.5",y:"27.8",transform:"matrix(-.707 .707 -.707 -.707 95.395 22.352)",fill:"#B0BEC5",width:"3.1",height:"6.2"}},{tag:"polygon",attr:{fill:"#FFC107",points:"27.5,42.2 26,48 31.8,46.5"}},{tag:"polygon",attr:{fill:"#37474F",points:"26.7,45 26,48 29,47.3"}}]})(s)}function H(){window.scroll(0,0),$("Profile");const{loggedCustomer:s}=y(l=>l.customer),[g,d]=f.useState(!1),[t,N]=f.useState([]),[b,o]=f.useState(!1),{data:c}=B(s==null?void 0:s._id),a=c==null?void 0:c.data,{data:m}=V({customer:s==null?void 0:s._id}),u=m==null?void 0:m.data,x=y(l=>l.wishlist.wishlists);if(!s)return e.jsx(A,{});const{name:v,phone:w,email:_,address:F}=a||{},{city:k,area:C,fullAddress:I}=F||{},P=!(a!=null&&a.image)||(a==null?void 0:a.image)===""||(a==null?void 0:a.image)===null?"/images/demo_user.jpg":`https://api.torayvinobd.store/customer/${a==null?void 0:a.image}`,S=async()=>{if((t==null?void 0:t.length)<=0)return alert("Please Select an Image");let l=t[0].file;const n=new FormData;n.append("image",l);const p={method:"PATCH",headers:{authorization:`bearer ${localStorage.getItem("token")}`},body:n};let h=`https://api.torayvinobd.store/api/customer/updateimage/${s==null?void 0:s._id}`;o(!0);try{const r=await fetch(h,p);if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);const i=await r.json();i!=null&&i.success?(j.success("Image Updated Successfully"),d(!1),setTimeout(()=>{location.reload()},1e3)):j.error((i==null?void 0:i.message)||"Failed to update image"),o(!1)}catch(r){j.error(r),console.error("Fetch Error:",r),o(!1)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid-cols-3 gap-6 rounded-md bg-primary/20 lg:grid",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-md bg-primary/70 py-4 font-medium text-base-100",children:[e.jsxs("div",{className:"update_image_wrap",children:[e.jsx("img",{src:P,alt:"user",className:"h-full w-full rounded-full"}),e.jsx("button",{onClick:()=>d(!0),className:"update_image_btn",children:e.jsx(z,{className:"text-2xl"})}),e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`overlay ${g&&"overlay_show"}`}),e.jsxs("div",{className:`modal w-[90%] sm:w-[500px] ${g&&"modal_show"}`,children:[e.jsxs("div",{className:"flex justify-between bg-primary/10 p-5 text-center text-neutral",children:[e.jsx("h1",{className:"text-xl",children:"Update Profile Photo"}),e.jsx("button",{onClick:()=>d(!1),children:e.jsx(L,{className:"text-2xl text-neutral-content"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx(T,{value:t,onChange:l=>N(l),dataURLKey:"data_url",children:({onImageUpload:l,onImageRemove:n,dragProps:p})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...p,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{onClick:l,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(t==null?void 0:t.length)>0&&"mt-4"} `,children:t==null?void 0:t.map((h,r)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:h.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>n(r),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(U,{})})]},r))})]})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:S,className:"rounded bg-primary px-6 py-1.5 text-base-100",disabled:b&&"disabled",children:b?"Loading..":"Upload"})})]})]})]})]}),e.jsx("h1",{className:"mt-2 text-xl",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"col-span-2 grid grid-cols-2 items-center gap-4 py-5 text-center",children:[e.jsxs("div",{className:"border-r border-neutral/50",children:[e.jsx("h1",{className:"font-medium",children:"Total Order"}),e.jsx("p",{className:"font-medium",children:u==null?void 0:u.length})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-medium",children:"Total Wishlist"}),e.jsx("p",{className:"font-medium",children:x==null?void 0:x.length})]})]})]}),e.jsxs("div",{className:"col-span-2 mt-4 rounded-md border p-4",children:[e.jsx("h3",{className:"mb-2 font-medium",children:"Personal Info"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("input",{type:"text",className:"mb-4 w-full rounded border px-3 py-1.5 outline-none",defaultValue:v,disabled:!0})}),e.jsx("div",{children:e.jsx("input",{type:"text",className:"mb-4 w-full rounded border bg-gray-100 px-3 py-1.5 outline-none",defaultValue:w,disabled:!0})}),e.jsx("div",{children:e.jsx("input",{type:"email",className:"mb-4 w-full rounded border px-3 py-1.5 outline-none",defaultValue:_,disabled:!0})}),e.jsx("h3",{className:"mb-2 font-medium",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx("input",{className:"mb-4 w-full rounded border px-3 py-1.5 outline-none",defaultValue:C,disabled:!0})}),e.jsx("div",{children:e.jsx("input",{className:"mb-4 w-full rounded border px-3 py-1.5 outline-none",defaultValue:k,disabled:!0})})]}),e.jsx("div",{children:e.jsx("textarea",{className:"mb-4 w-full rounded border px-3 py-1.5 outline-none",defaultValue:I,disabled:!0})}),e.jsx("div",{children:e.jsx(O,{to:"/account/profile/edit",className:"block scale-[1] rounded bg-primary py-2 text-center text-base-100 duration-300 hover:scale-[.99]",children:"Edit Profile"})})]})]})]})}export{H as default};
