import{p as b,o as C,j as s,R as I,T as M,Q as N}from"./index-f981d823.js";import{b as P,a as T,R as E}from"./reviewApi-790f00d5.js";function k(){var m,x,p,u;const[i,y]=b.useState(1),[r,R]=b.useState(""),{loggedUser:o}=C(t=>t.user),a=o==null?void 0:o.data,l={};l.limit=5,l.page=i,l.description=r;const{data:e}=P({...l}),[A]=T(),D=Math.ceil(parseInt((m=e==null?void 0:e.meta)==null?void 0:m.total)/parseInt((x=e==null?void 0:e.meta)==null?void 0:x.limit)),S=async t=>{var h,g,j,f;if(!window.confirm("Are you sure you want to delete this review?"))return;const c=t==null?void 0:t._id,_={customer:(h=t==null?void 0:t.customer)==null?void 0:h._id},n=await A({reviewId:c,data:_});(g=n==null?void 0:n.data)!=null&&g.success?N.success("Review deleted successfully"):(N.error(((f=(j=n==null?void 0:n.error)==null?void 0:j.data)==null?void 0:f.message)||"Failed to delete review"),console.log(n))};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-1 flex items-center justify-between rounded-md bg-base-100 p-3 shadow-lg",children:[s.jsx("h1",{className:"text-lg",children:"AllReview"}),s.jsx("input",{type:"text",className:"rounded-md border px-2.5 py-1.5 placeholder:text-sm",placeholder:"Search by description",value:r,onChange:t=>R(t.target.value)})]}),s.jsx("div",{className:"rounded bg-base-100 p-3 shadow-lg",children:e!=null&&e.data&&((p=e==null?void 0:e.data)==null?void 0:p.length)>0?s.jsxs("div",{className:"flex flex-col gap-2",children:[(u=e==null?void 0:e.data)==null?void 0:u.map(t=>{var d,c;return s.jsxs("div",{className:"relative border-b p-3",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("img",{src:(a==null?void 0:a.image)===""||(a==null?void 0:a.image)===null?"/images/demo_user.jpg":`https://api.torayvinobd.store/${a==null?void 0:a.image}`,alt:"user",className:"h-9 w-9 rounded-full"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("p",{children:(d=t==null?void 0:t.user)==null?void 0:d.name}),s.jsx("p",{className:"text-sm text-neutral-content",children:(c=t==null?void 0:t.createdAt)==null?void 0:c.split("T")[0]})]}),s.jsx(E,{rating:t==null?void 0:t.rating})]})]}),s.jsx("p",{className:"mt-2.5 text-sm text-neutral-content",children:t==null?void 0:t.description}),s.jsx("div",{className:"absolute right-3 top-3",children:s.jsx("button",{onClick:()=>S(t),className:"text-lg text-neutral-content duration-200 hover:text-primary",children:s.jsx(I,{})})})]},t==null?void 0:t._id)}),s.jsx("div",{className:"p-3",children:s.jsx(M,{setCurrentPage:y,currentPage:i,pages:D})})]}):s.jsx("p",{className:"py-4 text-center text-red-500",children:"There have been no reviews yet."})})]})}export{k as default};
