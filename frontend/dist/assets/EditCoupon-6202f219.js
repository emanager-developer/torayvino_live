import{u as O,v as W,m as A,j as e,Q as M}from"./index-3d958e2c.js";import{e as X,c as Y}from"./couponApi-59686a6a.js";function te(){var u,c,m,d,p,x,f,g,h;const{id:i}=O(),{data:t}=X(i),[I,{isLoading:o}]=Y(),Q=W(),[n,$]=A.useState(((u=t==null?void 0:t.data)==null?void 0:u.isUsageLimit)||!1),[l,B]=A.useState(((c=t==null?void 0:t.data)==null?void 0:c.usageLimit)||0),G=async r=>{var j,N,b,v,y,w,C,E,S,D,L,T,q,U,V,k;r.preventDefault();const a=r.target,P=a.code.value,R=a.minimumShopping.value,_=a.discount.value,z=a.startDate.value,F=a.startTime.value,H=a.endDate.value,J=a.endTime.value,K={code:P,minimumShopping:Number(R),isUsageLimit:n,usageLimit:Number(l),usageCount:((j=t==null?void 0:t.data)==null?void 0:j.usageCount)||0,availableCount:Number(l-(((N=t==null?void 0:t.data)==null?void 0:N.usageCount)||0)),discount:Number(_),startDate:z,startTime:F,endDate:H,endTime:J,status:(b=t==null?void 0:t.data)==null?void 0:b.status},s=await I({id:i,coupon:K});(v=s==null?void 0:s.data)!=null&&v.success?(M.success("Update Success"),Q("/admin/ecommerce-setting/coupons")):(M.error(Array.isArray((w=(y=s==null?void 0:s.error)==null?void 0:y.data)==null?void 0:w.error)&&((E=(C=s==null?void 0:s.error)==null?void 0:C.data)==null?void 0:E.error.length)>0?`${((L=(D=(S=s==null?void 0:s.error)==null?void 0:S.data)==null?void 0:D.error[0])==null?void 0:L.path)||""} ${((U=(q=(T=s==null?void 0:s.error)==null?void 0:T.data)==null?void 0:q.error[0])==null?void 0:U.message)||""}`.trim():((k=(V=s==null?void 0:s.error)==null?void 0:V.data)==null?void 0:k.message)||"Something went wrong!"),console.log(s))};return e.jsxs("section",{className:"rounded bg-base-100 shadow md:w-[600px]",children:[e.jsx("div",{className:"border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Edit Coupon"})}),e.jsxs("form",{onSubmit:G,className:"p-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Coupon code"}),e.jsx("input",{type:"text",name:"code",placeholder:"Enter Code",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(m=t==null?void 0:t.data)==null?void 0:m.code})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Minimum Shopping"}),e.jsx("input",{type:"number",name:"minimumShopping",placeholder:"Enter Minimum Shopping Amount",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(d=t==null?void 0:t.data)==null?void 0:d.minimumShopping})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Discount (%)"}),e.jsx("input",{type:"number",name:"discount",placeholder:"Enter Discount %",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(p=t==null?void 0:t.data)==null?void 0:p.discount})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Usage Limit"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable if this item has a usage limit"})]}),e.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:n,onChange:()=>$(!n)}),e.jsx("div",{className:"peer h-6 w-11 rounded-full bg-gray-300 after:absolute after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-all peer-checked:bg-primary peer-checked:after:translate-x-full"})]})]}),n&&e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Usage Limit"}),e.jsx("input",{type:"number",name:"usageLimit",value:l,onChange:r=>B(Number(r.target.value)),placeholder:"Enter Usage Limit",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(x=t==null?void 0:t.data)==null?void 0:x.startDate})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Start Time"}),e.jsx("input",{type:"time",name:"startTime",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(f=t==null?void 0:t.data)==null?void 0:f.startTime})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(g=t==null?void 0:t.data)==null?void 0:g.endDate})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"End Time"}),e.jsx("input",{type:"time",name:"endTime",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(h=t==null?void 0:t.data)==null?void 0:h.endTime})]})]}),e.jsx("div",{className:"mt-6 flex justify-end border-t p-4",children:e.jsx("button",{disabled:o,className:"primary_btn",children:o?"Loading...":"Edit Coupon"})})]})]})}export{te as default};
