import{u as G,y as P,p as C,j as e,Q as E}from"./index-f981d823.js";import{e as R,c as _}from"./couponApi-d935a6e5.js";function H(){var u,c,m,d,p,x,f,g,h;const{id:r}=G(),{data:t}=R(r),[D,{isLoading:o}]=_(),L=P(),[a,S]=C.useState(((u=t==null?void 0:t.data)==null?void 0:u.isUsageLimit)||!1),[i,T]=C.useState(((c=t==null?void 0:t.data)==null?void 0:c.usageLimit)||0),q=async l=>{var j,N,b,v,y,w;l.preventDefault();const s=l.target,U=s.code.value,V=s.minimumShopping.value,k=s.discount.value,M=s.startDate.value,I=s.startTime.value,Q=s.endDate.value,A=s.endTime.value,B={code:U,minimumShopping:Number(V),isUsageLimit:a,usageLimit:Number(i),usageCount:((j=t==null?void 0:t.data)==null?void 0:j.usageCount)||0,availableCount:Number(i-(((N=t==null?void 0:t.data)==null?void 0:N.usageCount)||0)),discount:Number(k),startDate:M,startTime:I,endDate:Q,endTime:A,status:(b=t==null?void 0:t.data)==null?void 0:b.status},n=await D({id:r,coupon:B});(v=n==null?void 0:n.data)!=null&&v.success?(E.success("Update Success"),L("/admin/ecommerce-setting/coupons")):(E.error(((w=(y=n==null?void 0:n.error)==null?void 0:y.data)==null?void 0:w.message)||"something went wrong"),console.log(n))};return e.jsxs("section",{className:"rounded bg-base-100 shadow md:w-[600px]",children:[e.jsx("div",{className:"border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Edit Coupon"})}),e.jsxs("form",{onSubmit:q,className:"p-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Coupon code"}),e.jsx("input",{type:"text",name:"code",placeholder:"Enter Code",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(m=t==null?void 0:t.data)==null?void 0:m.code})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Minimum Shopping"}),e.jsx("input",{type:"number",name:"minimumShopping",placeholder:"Enter Minimum Shopping Amount",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(d=t==null?void 0:t.data)==null?void 0:d.minimumShopping})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Discount (%)"}),e.jsx("input",{type:"number",name:"discount",placeholder:"Enter Discount %",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(p=t==null?void 0:t.data)==null?void 0:p.discount})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Usage Limit"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable if this item has a usage limit"})]}),e.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:a,onChange:()=>S(!a)}),e.jsx("div",{className:"peer h-6 w-11 rounded-full bg-gray-300 after:absolute after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-all peer-checked:bg-primary peer-checked:after:translate-x-full"})]})]}),a&&e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Usage Limit"}),e.jsx("input",{type:"number",name:"usageLimit",value:i,onChange:l=>T(Number(l.target.value)),placeholder:"Enter Usage Limit",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(x=t==null?void 0:t.data)==null?void 0:x.startDate})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"Start Time"}),e.jsx("input",{type:"time",name:"startTime",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(f=t==null?void 0:t.data)==null?void 0:f.startTime})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(g=t==null?void 0:t.data)==null?void 0:g.endDate})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[e.jsx("p",{className:"text-neutral-content",children:"End Time"}),e.jsx("input",{type:"time",name:"endTime",className:"w-full rounded border px-3 py-2 text-sm outline-none",required:!0,defaultValue:(h=t==null?void 0:t.data)==null?void 0:h.endTime})]})]}),e.jsx("div",{className:"mt-6 flex justify-end border-t p-4",children:e.jsx("button",{disabled:o,className:"primary_btn",children:o?"Loading...":"Edit Coupon"})})]})]})}export{H as default};
