import{g as y,j as e,F as C,h as I,M as k,r as F,i as j,k as q,l as f,m as T,L as h,n as u,o as _,Q as D,p as E,q as S}from"./index-e0eec1b4.js";import{S as N}from"./sweetalert2.all-ececa84d.js";function O({product:a}){console.log(a);const s=y(),{_id:l,thumbnail:c,title:t,discount:i,price:n,quantity:r,sku:d,stock:g}=a,o=parseInt(n-n*i/100),p=parseInt(i>=1?o:n)*parseInt(r),w=(x,m)=>{window.confirm("Are you sure delete this item?")&&s(F({id:x,sku:m}))},v=(x,m)=>{g>r?s(j({id:x,sku:m,quantity:r+1})):N.fire("","Sorry! We don't have enough stock","warning")},b=(x,m)=>{r>1?s(j({id:x,sku:m,quantity:r-1})):N.fire("","Sorry! You can't decrease quantity. You can remove it from the remove button","warning")};return e.jsxs("tr",{children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`https://api.torayvinobd.store/${c}`,alt:t,className:"h-10 w-10 rounded-lg",loading:"lazy"}),e.jsxs("div",{className:"leading-4",children:[e.jsx("h3",{className:"text-neutral",children:t.length>50?`${t.slice(0,50)}...`:t}),e.jsx("p",{className:"text-neutral-content",children:d})]})]})}),e.jsx("td",{className:"px-6 py-2 font-medium",children:e.jsx("p",{children:i>=1?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["৳",o]}),e.jsxs("del",{className:"pl-1 text-xs text-red-500",children:["৳",n]})]}):e.jsxs("span",{children:["৳",n]})})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[!(a!=null&&a.isBundleFree)&&e.jsx("button",{onClick:()=>b(l,d),className:"text-lg text-neutral-content duration-200 hover:text-neutral",children:e.jsx(C,{})}),e.jsx("div",{children:e.jsx("p",{className:"w-max rounded-lg py-px text-center text-neutral",children:r})}),!(a!=null&&a.isBundleFree)&&e.jsx("button",{onClick:()=>v(l,d),className:"text-lg text-neutral-content duration-200 hover:text-neutral",children:e.jsx(I,{})})]})}),e.jsx("td",{className:"px-6 py-3 font-medium",children:e.jsxs("p",{children:["৳",e.jsx("span",{children:p})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("button",{onClick:()=>w(l,d),className:"text-xl text-red-600 hover:underline",children:e.jsx(k,{})})})]})}function P({carts:a}){return e.jsx("div",{className:"relative overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[60%] px-6",children:"Product"}),e.jsx("th",{className:"w-[10%] px-6",children:"Price"}),e.jsx("th",{className:"w-[10%] px-6",children:"QUANTITY"}),e.jsx("th",{className:"w-[10%] px-6",children:"Total"}),e.jsx("th",{className:"w-[10%] px-6",children:"Action"})]})}),e.jsx("tbody",{children:(a==null?void 0:a.length)>0&&(a==null?void 0:a.map((s,l)=>e.jsx(O,{product:s},l)))})]})})}function Q(){q("Cart");const{loggedUser:a}=f(t=>t.user),s=f(t=>t.cart.carts),l=y(),c=s==null?void 0:s.reduce((t,i)=>t+i.quantity*parseInt(i.price-i.price*i.discount/100),0);return T.useEffect(()=>{if(window.scrollTo(0,0),(s==null?void 0:s.length)>0){const t=a==null?void 0:a.data;let i={};t&&(i={name:t==null?void 0:t.name,phone_number:t==null?void 0:t.phone,email:t==null?void 0:t.email,address:t==null?void 0:t.address,country:"Bangladesh"}),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"cart_view",custom:i,ecommerce:{currency:"BDT",value:c,items:[s==null?void 0:s.map(n=>({item_id:n==null?void 0:n._id,item_name:n==null?void 0:n.title,price:(n==null?void 0:n.price)-(n==null?void 0:n.price)*parseInt(n==null?void 0:n.discount)/100,quantity:n==null?void 0:n.quantity,item_discount:parseInt(n==null?void 0:n.discount)}))]}})}},[s,a,c]),e.jsx("div",{className:"min-h-[60vh] py-5",children:e.jsx("div",{className:"container",children:(s==null?void 0:s.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-8 text-center text-xl font-medium",children:["Your Cart - ",e.jsx("span",{children:(s==null?void 0:s.length)||"0"})," ",s!=null&&s.length?s.length<2?"Item":"Items":"Item"]}),e.jsxs("div",{className:"rounded-md border shadow-lg",children:[e.jsx(P,{carts:s}),e.jsxs("div",{className:"flex items-center gap-4 p-3 text-sm",children:[e.jsxs(h,{to:"/shops",className:"primary_btn flex items-center gap-2",children:[e.jsx(u,{className:"-rotate-180"})," Continue to shopping"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure clear all carts?")&&(l(_()),D.success("Cart cleared successfully"))},className:"flex items-center gap-2 rounded bg-red-500 px-4 py-2 text-base-100",children:["Clear Carts ",e.jsx(E,{className:"text-base"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"mt-1 min-w-full rounded-md border bg-base-100 p-4 shadow-lg sm:min-w-[500px]",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-2 text-lg font-medium",children:[e.jsx("h3",{children:"Total"}),e.jsxs("p",{children:["৳",c]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(h,{to:"/checkout",className:"flex scale-[.99] items-center justify-center gap-4 rounded bg-primary p-2 text-center text-sm font-semibold text-base-100 duration-300 hover:scale-[1]",children:["PROCEED TO CHECKOUT ",e.jsx(u,{})]})})]})})]}):e.jsxs("div",{className:"flex min-h-[50vh] flex-col items-center justify-center gap-3",children:[e.jsx(S,{className:"text-6xl text-primary"}),e.jsx("h2",{className:"text-xl",children:"Your cart is Emtry"}),e.jsx(h,{to:"/shops",className:"rounded bg-primary px-6 py-2 text-sm text-base-100",children:"Continue to shopping"})]})})})}export{Q as default};
