import{u as U,y as q,p as o,b1 as G,j as t,S as C,Q as g}from"./index-f981d823.js";import{c as y,d as D}from"./subSubCategoryApi-83220bb9.js";import{u as M}from"./subCategoryApi-75905068.js";function z(){var h;const{id:m}=U(),N=q(),[i,p]=o.useState(null),[_,x]=o.useState(null),{data:n,isLoading:b}=y(m),a=n==null?void 0:n.data,{data:r}=G(),u=(r==null?void 0:r.data)||[],{data:c}=M({category:i}),d=i?(c==null?void 0:c.data)||[]:[];o.useEffect(()=>{var e,l;a&&(p((e=a==null?void 0:a.category)==null?void 0:e._id),x((l=a==null?void 0:a.subCategory)==null?void 0:l._id))},[a]);const[w,{isLoading:S}]=D(),E=async e=>{var j,v,f;e.preventDefault();const l=e.target.name.value,L=e.target.category.value,Q=e.target.subCategory.value,s=await w({id:m,data:{name:l,category:L,subCategory:Q}});(j=s==null?void 0:s.data)!=null&&j.success?(g.success("Update success"),N("/admin/category/sub-sub-categories")):(g.error(((f=(v=s==null?void 0:s.error)==null?void 0:v.data)==null?void 0:f.message)||"Something went wrong"),console.log(s))};return b?t.jsx(C,{}):t.jsxs("form",{onSubmit:E,className:"rounded bg-base-100 p-4 xl:w-1/2",children:[t.jsxs("div",{className:"form_group mt-2",children:[t.jsx("p",{children:"Sub SubCategory Name"}),t.jsx("input",{type:"text",name:"name",defaultValue:(h=n==null?void 0:n.data)==null?void 0:h.name,required:!0})]}),t.jsxs("div",{className:"form_group mt-2",children:[t.jsx("p",{className:"text-neutral-content",children:"Category *"}),t.jsxs("select",{name:"category",required:!0,onChange:e=>p(e.target.value),value:i,children:[t.jsx("option",{value:"",children:"Select Category"}),u==null?void 0:u.map(e=>t.jsx("option",{value:e==null?void 0:e._id,children:e==null?void 0:e.name},e==null?void 0:e._id))]})]}),t.jsxs("div",{className:"form_group mt-2",children:[t.jsx("p",{className:"text-neutral-content",children:"Sub Category *"}),t.jsxs("select",{name:"subCategory",required:!0,value:_,onChange:e=>x(e.target.value),children:[t.jsx("option",{value:"",children:"Select Sub Category"}),(d==null?void 0:d.length)>0&&(d==null?void 0:d.map(e=>t.jsx("option",{value:e==null?void 0:e._id,children:e==null?void 0:e.name},e==null?void 0:e._id)))]})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{className:"rounded bg-primary px-6 py-1.5 text-base-100",disabled:S&&"disabled",children:S?"Loading..":"Update"})})]})}export{z as default};
