import{cJ as y,k as v,j as e,Q as c,aK as U,o as L,cK as q,cL as S,cM as _}from"./index-f981d823.js";function M({id:d}){const[o,{isLoading:u}]=y(),l=v(),a=async r=>{var m,x,f;r.preventDefault();const i=r.target.newPassword.value,p=r.target.reNewPassword.value,n=r.target.oldPassword.value;if(i!==p){c.error("Password does not match");return}const t=await o({id:d,oldPassword:n,newPassword:i});console.log(t),(m=t==null?void 0:t.data)!=null&&m.success?(c.success("Password updated successfully"),l(U())):(c.error(((f=(x=t==null?void 0:t.error)==null?void 0:x.data)==null?void 0:f.message)||"Something  went wrong"),console.log(t))};return e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Update Password"})}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:a,className:"form_group flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-content",children:"Current Password"}),e.jsx("input",{type:"password",name:"oldPassword",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-content",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-content",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"reNewPassword",required:!0})]}),e.jsx("div",{children:e.jsx("button",{disabled:u,className:"primary_btn",children:u?"Loading...":"Update Password"})})]})})]})}function E(){const{loggedUser:d}=L(n=>n.user),o=d==null?void 0:d._id,u=v(),{data:l}=q(o),a=l==null?void 0:l.data,[r,{isLoading:i}]=S(),p=async n=>{var w,h,j,g,P,b,N;n.preventDefault();const t=n.target,m=t.name.value,x=t.profileUrl.value,s=await r({id:o,data:{name:m,profileUrl:x}});(w=s==null?void 0:s.data)!=null&&w.success?(c.success("Profile update success"),u(_({name:(j=(h=s==null?void 0:s.data)==null?void 0:h.data)==null?void 0:j.name,profileUrl:(P=(g=s==null?void 0:s.data)==null?void 0:g.data)==null?void 0:P.profileUrl}))):(c.error(((N=(b=s==null?void 0:s.error)==null?void 0:b.data)==null?void 0:N.message)||"Something went wrong"),console.log(s))};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"rounded bg-base-100 pb-4 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"My Profile"})}),e.jsxs("div",{className:"grid gap-4 xl:grid-cols-2 xl:border-b",children:[e.jsx("div",{className:"p-4 xl:border-r",children:e.jsxs("form",{onSubmit:p,className:"form_group flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-content",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",required:!0,defaultValue:a==null?void 0:a.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-content",children:"Profile Url"}),e.jsx("input",{type:"text",name:"profileUrl",required:!0,defaultValue:a==null?void 0:a.profileUrl})]}),e.jsx("div",{children:e.jsx("button",{disabled:i&&"disabled",className:"primary_btn",children:i?"Loading...":"Update Profile"})})]})}),e.jsx(M,{id:o})]})]}),e.jsx("br",{})]})}export{E as default};
