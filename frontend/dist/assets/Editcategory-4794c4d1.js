import{u as C,bc as w,v as S,bd as U,m as f,Q as b,j as e,S as $,am as D,an as E}from"./index-3d958e2c.js";function _(){const{id:c}=C(),{data:o,isLoading:v}=w(c),a=o==null?void 0:o.data,u=S(),[N,{isLoading:p,isSuccess:x,isError:g,error:t}]=U(),[s,h]=f.useState([]),y=async r=>{var j;r.preventDefault();let n=(j=s[0])==null?void 0:j.file;const i=r.target.name.value,l=r.target.order.value,d={name:i,order:l},m=new FormData;m.append("data",JSON.stringify(d)),(s==null?void 0:s.length)>0&&m.append("image",n),await N({id:c,formData:m})};return f.useEffect(()=>{var r,n,i,l,d,m;x&&(b.success("Update successful"),h([]),u("/admin/category/categories")),g&&b.error(`${((i=(n=(r=t==null?void 0:t.data)==null?void 0:r.error)==null?void 0:n[0])==null?void 0:i.message)||((d=(l=t==null?void 0:t.data)==null?void 0:l.error)==null?void 0:d.message)||((m=t==null?void 0:t.data)==null?void 0:m.message)||"Update failed, please try again"}`)},[x,g,u,t]),v?e.jsx($,{}):e.jsxs("form",{onSubmit:y,className:"rounded bg-base-100 p-4 sm:w-1/2",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Icon"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(D,{value:s,onChange:r=>h(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:n,dragProps:i})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),(s==null?void 0:s.length)<=0&&(a==null?void 0:a.icon)&&e.jsx("img",{src:`https://api.torayvinobd.store/categories/${a==null?void 0:a.icon}`,alt:"",className:"mt-4 w-32"}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((l,d)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:l.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>n(d),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(E,{})})]},d))})]})}),e.jsx("img",{src:`https://api.torayvinobd.store/${a==null?void 0:a.image}`,alt:"",className:"h-14 w-14 rounded-full border"})]})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{children:"Category name"}),e.jsx("input",{type:"text",name:"name",defaultValue:a==null?void 0:a.name,required:!0})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{children:"Category Order"}),e.jsx("input",{type:"number",name:"order",defaultValue:a==null?void 0:a.order})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"rounded bg-primary px-6 py-1.5 text-base-100",disabled:p&&"disabled",children:p?"Loading..":"Update"})})]})}export{_ as default};
