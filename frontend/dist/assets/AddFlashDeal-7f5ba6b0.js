import{y,p as j,g as D,j as e,cI as F}from"./index-f981d823.js";import{c as S}from"./flashDeal-4c52b3c5.js";import{S as b}from"./sweetalert2.esm.all-3fe0d2e9.js";function A(){const g=y(),[l,o]=j.useState([]),[p,h]=j.useState([]),{data:n}=D({}),f=n==null?void 0:n.data,[N,{isLoading:x}]=S(),m=(s,a,t)=>{h(i=>{var d;const r=[...i];return r[s]||(r[s]=[]),r[s]={...r[s],product:(d=l[s])==null?void 0:d._id,[a]:t},r})},v=async s=>{var u;s.preventDefault();const a=s.target,t=a.title.value,i=a.startDate.value,r=a.endDate.value,c=await N({title:t,startDate:i,endDate:r,flashProducts:p});(u=c==null?void 0:c.data)!=null&&u.success?(b.fire("","Flash deal add success","success"),o([]),a.reset(),h([]),g("/admin/flash-deal")):b.fire("","Something went wrong","error")};return e.jsxs("section",{className:"rounded bg-base-100 p-3 text-neutral",children:[e.jsx("p",{children:"Flash Deal Information"}),e.jsxs("form",{onSubmit:v,className:"mx-auto mt-6 flex flex-col gap-4 text-sm sm:w-2/3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Title"}),e.jsx("input",{type:"text",className:"rounded border px-4 py-1 outline-none",name:"title",required:!0})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Start Date"}),e.jsx("input",{type:"date",className:"rounded border px-4 py-1 outline-none",name:"startDate",required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"End Date"}),e.jsx("input",{type:"date",className:"rounded border px-4 py-1 outline-none",name:"endDate",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Products"}),e.jsx(F,{multi:!0,options:f,labelField:"title",valueField:"title",onChange:s=>o(s),values:l})]}),(l==null?void 0:l.length)>0&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Discounts"}),e.jsx("div",{className:"relative overflow-x-auto shadow-lg",children:e.jsxs("table",{className:"dashboard_table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-b border-r bg-gray-100",children:"Product"}),e.jsx("th",{className:"border-b border-r bg-gray-100",children:"Base Price"}),e.jsx("th",{className:"border-b border-r bg-gray-100",children:"Discount"}),e.jsx("th",{className:"border-b bg-gray-100",children:"Discount Type"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border-r",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`https://api.torayvinobd.store/products/${s==null?void 0:s.thumbnail}`,alt:"",className:"h-8 w-8 rounded"}),e.jsx("p",{children:s==null?void 0:s.title})]})}),e.jsx("td",{className:"border-r",children:e.jsx("p",{children:s==null?void 0:s.sellingPrice})}),e.jsx("td",{className:"border-r",children:e.jsx("input",{type:"number",name:"",className:"w-28 rounded border px-4 py-1 outline-none",onChange:t=>m(a,"discount",t.target.value),required:!0})}),e.jsx("td",{children:e.jsx("select",{className:"rounded border px-4 py-1 outline-none",onChange:t=>m(a,"discountType",t.target.value),required:!0,children:e.jsx("option",{value:"1",children:"%"})})})]},a))})]})})]}),e.jsx("div",{children:e.jsx("button",{disabled:x&&"disabled",className:"primary_btn",children:x?"Loading...":"Save"})})]})]})}export{A as default};
