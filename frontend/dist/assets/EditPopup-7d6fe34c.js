import{u as C,da as k,p as l,db as P,y as S,j as e,S as I,ap as E,aq as A,Q as f}from"./index-f981d823.js";function L(){const{id:m}=C(),{data:o,isLoading:v}=k(m),a=o==null?void 0:o.data,[s,N]=l.useState([]),[u,x]=l.useState(""),[h,b]=l.useState(""),[d,p]=l.useState(!0),[y,{isLoading:g}]=P(),j=S();l.useEffect(()=>{a&&(x(a.title||""),b(a.description||""),p(a.isActive))},[a]);const w=async()=>{var i,c,r;let t=new FormData;(i=s[0])!=null&&i.file&&t.append("image",s[0].file),t.append("title",u),t.append("description",h),t.append("isActive",d);const n=await y({id:m,formData:t});n.error?f.error(((r=(c=n==null?void 0:n.error)==null?void 0:c.data)==null?void 0:r.message)||"Something went wrong when updating popup"):(f.success("Popup updated successfully"),j("/admin/front-end/popup/all"))};return v?e.jsx(I,{}):e.jsxs("section",{children:[e.jsx("div",{className:"rounded border-b bg-base-100 p-4",children:e.jsx("h1",{className:"font-medium text-neutral",children:"Edit Popup"})}),e.jsxs("div",{className:"rounded bg-base-100 shadow",children:[e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Popup Image"}),(a==null?void 0:a.image)&&s.length===0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-neutral-content mb-2",children:"Current Image:"}),e.jsx("img",{src:`https://api.torayvinobd.store${a.image}`,alt:a.title||"Current popup",className:"h-40 w-60 object-cover rounded border"})]}),e.jsx(E,{value:s,onChange:t=>N(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:n,dragProps:i})=>e.jsxs("div",{className:"w-full rounded border border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{onClick:t,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:s.length>0?"Change Image":"Choose New Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("p",{className:"text-xs text-neutral-content",children:s.length===0?"Leave empty to keep current image":"Recommended size: 600x500px"}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"}`,children:s==null?void 0:s.map((c,r)=>e.jsxs("div",{className:"image-item relative inline-block",children:[e.jsx("img",{src:c.data_url,alt:"",className:"h-40 w-60 object-cover rounded"}),e.jsx("div",{onClick:()=>n(r),className:"absolute right-2 top-2 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-red-500 text-white hover:bg-red-600",children:e.jsx(A,{})})]},r))})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Title (Optional)"}),e.jsx("input",{type:"text",value:u,onChange:t=>x(t.target.value),placeholder:"Enter popup title...",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:h,onChange:t=>b(t.target.value),placeholder:"Enter popup description...",rows:"3",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-primary focus:outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"status",checked:d,onChange:()=>p(!0),className:"text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"status",checked:!d,onChange:()=>p(!1),className:"text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Inactive"})]})]}),e.jsx("p",{className:"mt-1 text-xs text-neutral-content",children:"Note: Only one popup can be active at a time"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 border-t p-4",children:[e.jsx("button",{onClick:()=>j("/admin/front-end/popup/all"),className:"rounded bg-gray-200 px-6 py-2 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{disabled:g,onClick:w,className:"primary_btn",children:g?"Updating...":"Update Popup"})]})]})]})}export{L as default};
