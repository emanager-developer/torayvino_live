import{v as E,m as F,c as T,di as _,j as e,cI as $,Q as w}from"./index-3d958e2c.js";function Q(){const P=E(),[t,o]=F.useState([]),[S,h]=F.useState([]),{data:d}=T({}),q=d==null?void 0:d.data,[A,{isLoading:x}]=_(),u=(s,l,r)=>{h(i=>{var c;const n=[...i];return n[s]||(n[s]=[]),n[s]={...n[s],product:(c=t[s])==null?void 0:c._id,[l]:r},n})},C=async s=>{var m,j,g,b,p,f,N,v,y,D;s.preventDefault();const l=s.target,r=l.title.value,i=l.startDate.value,n=l.endDate.value,a=await A({title:r,startDate:i,endDate:n,flashProducts:S});(m=a==null?void 0:a.data)!=null&&m.success?(w.success("Flash Deal added successfully"),o([]),l.reset(),h([]),P("/admin/flash-deal")):w.error(`${((p=(b=(g=(j=a==null?void 0:a.error)==null?void 0:j.data)==null?void 0:g.error)==null?void 0:b[0])==null?void 0:p.message)||((v=(N=(f=a==null?void 0:a.error)==null?void 0:f.data)==null?void 0:N.error)==null?void 0:v.message)||((D=(y=a==null?void 0:a.error)==null?void 0:y.data)==null?void 0:D.message)||"Something went wrong!"}`)};return e.jsxs("section",{className:"rounded bg-base-100 p-3 text-neutral",children:[e.jsx("p",{children:"Flash Deal Information"}),e.jsxs("form",{onSubmit:C,className:"mx-auto mt-6 flex flex-col gap-4 text-sm sm:w-2/3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Title"}),e.jsx("input",{type:"text",className:"rounded border px-4 py-1 outline-none",name:"title",required:!0})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Start Date"}),e.jsx("input",{type:"date",className:"rounded border px-4 py-1 outline-none",name:"startDate",required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"End Date"}),e.jsx("input",{type:"date",className:"rounded border px-4 py-1 outline-none",name:"endDate",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Products"}),e.jsx($,{multi:!0,options:q,labelField:"title",valueField:"title",onChange:s=>o(s),values:t})]}),(t==null?void 0:t.length)>0&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:"Discounts"}),e.jsx("div",{className:"relative overflow-x-auto shadow-lg",children:e.jsxs("table",{className:"dashboard_table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-b border-r bg-gray-100",children:"Product"}),e.jsx("th",{className:"border-b border-r bg-gray-100",children:"Base Price"}),e.jsx("th",{className:"border-b border-r bg-gray-100",children:"Discount"}),e.jsx("th",{className:"border-b bg-gray-100",children:"Discount Type"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border-r",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`https://api.torayvinobd.store/products/${s==null?void 0:s.thumbnail}`,alt:"",className:"h-8 w-8 rounded"}),e.jsx("p",{children:s==null?void 0:s.title})]})}),e.jsx("td",{className:"border-r",children:e.jsx("p",{children:s==null?void 0:s.sellingPrice})}),e.jsx("td",{className:"border-r",children:e.jsx("input",{type:"number",name:"",className:"w-28 rounded border px-4 py-1 outline-none",onChange:r=>u(l,"discount",r.target.value),required:!0})}),e.jsx("td",{children:e.jsx("select",{className:"rounded border px-4 py-1 outline-none",onChange:r=>u(l,"discountType",r.target.value),required:!0,children:e.jsx("option",{value:"1",children:"%"})})})]},l))})]})})]}),e.jsx("div",{children:e.jsx("button",{disabled:x&&"disabled",className:"primary_btn",children:x?"Loading...":"Save"})})]})]})}export{Q as default};
