import{v as Re,m as t,c5 as Le,c6 as Xe,c7 as He,W as Oe,c8 as Ye,j as e,c9 as Qe,Q as d}from"./index-3d958e2c.js";import{T as Ke,G as Je,P as We,a as Ue,V as Ze,F as es,D as ss}from"./Details-6904b38e.js";import{B as ts}from"./Bundle-b6740fd8.js";import"./brandApi-6edcd915.js";import"./subCategoryApi-b4ea3950.js";import"./subSubCategoryApi-48398f56.js";import"./colorApi-56ff5f97.js";function os(){var ye;const Y=Re(),q=2*1024*1024,Ie=10*1024*1024,K=10,J=20,[m,W]=t.useState([]),[c,U]=t.useState([]),[o,T]=t.useState([]),[Z,ee]=t.useState(""),[se,te]=t.useState(null),[B,ae]=t.useState(null),[D,re]=t.useState(null),[Me,le]=t.useState(null),[Q,S]=t.useState(0),[I,_]=t.useState(0),[Ee,ne]=t.useState(0),[de,ie]=t.useState(!1),[M,ce]=t.useState(""),[E,oe]=t.useState(""),[f,$e]=t.useState(!1),[u,ue]=t.useState([]),[h,me]=t.useState([]),[p,j]=t.useState([{title:"",description:""}]),[N,$]=t.useState([]),[y,V]=t.useState([]),[g,v]=t.useState([{question:"",answer:""}]),[xe,he]=t.useState(""),[w,z]=t.useState([]),[k,pe]=t.useState(!1),[ge,be]=t.useState(0),[fe,je]=t.useState(0);t.useEffect(()=>{var s;f&&(u==null?void 0:u.length)>0?(S(((s=u[0])==null?void 0:s.price)||0),_(u==null?void 0:u.reduce((r,l)=>r+(Number(l.stock)||0),0))):(S(0),_(0))},[f,u]);const[Ve,{isLoading:Ne}]=Le(),{data:G}=Xe(),{data:R}=He(),{data:L}=Oe(),{data:X}=Ye(),C=(G==null?void 0:G.data)||[],F=(R==null?void 0:R.data)||[],A=(L==null?void 0:L.data)||[],H=(X==null?void 0:X.data)||[],ze=async s=>{var ve,we,Se,_e,ke,Ce,Fe,Ae,Pe,qe,Te,Be,De;if(s.preventDefault(),(m==null?void 0:m.length)<=0)return d.warning("Thumbnail is required");if(!Z)return d.warning("Title is required");if(!B)return d.warning("Category is required");if(!Q)return d.warning("Price is required");if(!I)return d.warning("Stock is required");if(!M)return d.warning("Description is required");const r=(ve=m==null?void 0:m[0])==null?void 0:ve.file;if(!r)return d.warning("Thumbnail is required");if(r.size>q)return d.warning("Thumbnail is too large (max 2MB)");if((c==null?void 0:c.length)>K)return d.warning(`Maximum ${K} gallery images allowed`);if(c!=null&&c.some(a=>{var x;return((x=a==null?void 0:a.file)==null?void 0:x.size)>q}))return d.warning("One or more gallery images are too large (max 2MB each)");const l=(we=o==null?void 0:o[0])==null?void 0:we.file;if(l&&l.size>Ie)return d.warning("Product manual is too large (max 10MB)");const n=(h||[]).map(a=>{var x;return(x=a==null?void 0:a[0])==null?void 0:x.file}).filter(Boolean);if(n.length>J)return d.warning(`Maximum ${J} variant images allowed`);if(n.some(a=>a.size>q))return d.warning("One or more variant images are too large (max 2MB each)");const P={title:Z,brand:Me,price:Q,stock:I,discount:Ee,featured:de,description:M,isVariant:f,variants:u,tags:E?[E]:[],specifications:p.filter(a=>a.title&&a.description),feature:N,shortFeature:y,faq:g.filter(a=>a.question&&a.answer),disclaimer:xe,kits:w,isBundle:k,bundlePurchaseQuantity:k?ge:0,bundleQuantity:k?fe:0};P.category=B,D&&(P.subCategory=D),se&&(P.subSubCategory=se);const b=new FormData;b.append("thumbnail",r),(c==null?void 0:c.length)>0&&c.forEach(a=>b.append("gallery",a.file)),(o==null?void 0:o.length)>0&&b.append("productManual",(Se=o[0])==null?void 0:Se.file),(h==null?void 0:h.length)>0&&h.forEach((a,x)=>{if((a==null?void 0:a.length)>0){const O=a[0].file,Ge=new File([O],`variant-${x}-${O.name}`,{type:O.type});b.append("variantImages",Ge)}}),b.append("data",JSON.stringify(P));const i=await Ve(b);(_e=i==null?void 0:i.data)!=null&&_e.success?(d.success("Product added successfully"),W([]),U([]),T([]),ee(""),ae(""),re(""),te(""),le(""),ne(""),S(""),_(""),ie(!1),ue(""),ce(""),oe(""),j([{title:"",description:""}]),$([]),V([]),v([{question:"",answer:""}]),he(""),z([]),me([]),pe(!1),be(0),je(0),Y("/admin/product/all-products")):(d.error(`${((Ae=(Fe=(Ce=(ke=i==null?void 0:i.error)==null?void 0:ke.data)==null?void 0:Ce.error)==null?void 0:Fe[0])==null?void 0:Ae.message)||((Te=(qe=(Pe=i==null?void 0:i.error)==null?void 0:Pe.data)==null?void 0:qe.error)==null?void 0:Te.message)||((De=(Be=i==null?void 0:i.error)==null?void 0:Be.data)==null?void 0:De.message)||"Something went wrong!"}`),console.log(i))};return e.jsxs("div",{className:"add_product rounded bg-base-100 shadow",children:[e.jsx("h3",{className:"border-b p-4 text-lg font-medium text-neutral",children:"Add Product"}),e.jsxs("div",{className:"p-3 text-neutral-content",children:[e.jsx(Ke,{thumbnail:m,setThumbnail:W}),e.jsx(Je,{galleries:c,setGalleries:U}),e.jsxs("div",{className:"form_group mt-3",children:[e.jsx(We,{setTitle:ee,categoryId:B,setCategoryId:ae,subCategoryId:D,setSubCategoryId:re,setSubSubCategoryId:te,setBrand:le}),e.jsx(Ue,{price:Q,setPrice:S,setDiscount:ne,stock:I,setStock:_,isVariant:f}),e.jsx(Ze,{isVariant:f,setIsVariant:$e,variants:u,setVariants:ue,variantImages:h,setVariantImages:me}),e.jsx(es,{featured:de,setFeatured:ie}),e.jsx(ts,{isBundle:k,setIsBundle:pe,bundlePurchaseQuantity:ge,setBundlePurchaseQuantity:be,bundleQuantity:fe,setBundleQuantity:je}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("label",{className:"mb-2 block text-sm",children:["Tags ",e.jsx("small",{children:"(select from Tag list)"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("select",{value:E,onChange:s=>oe(s.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"Select a tag"}),H==null?void 0:H.map(s=>e.jsx("option",{value:s==null?void 0:s.name,children:s==null?void 0:s.name},s==null?void 0:s._id))]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-neutral-content",children:[e.jsx("span",{children:"Select one tag for badge."}),e.jsx("button",{type:"button",onClick:()=>Y("/admin/tags"),className:"rounded bg-primary px-3 py-1 text-base-100",children:"Manage Tags"})]})]})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("p",{className:"mb-2 text-sm",children:"Product Manual (PDF)"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 rounded border border-dashed p-3",children:[e.jsx("input",{type:"file",accept:".pdf",onChange:s=>{s.target.files&&s.target.files[0]&&T([{file:s.target.files[0],name:s.target.files[0].name}])},className:"hidden",id:"pdf-upload"}),e.jsx("label",{htmlFor:"pdf-upload",className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose PDF File"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop PDF here"})]}),e.jsx("div",{className:"rounded border border-dashed p-3",children:(o==null?void 0:o.length)>0?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm text-neutral-content",children:(ye=o[0])==null?void 0:ye.name})]}),e.jsx("button",{type:"button",onClick:()=>T([]),className:"text-red-500 hover:text-red-700",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}):e.jsx("p",{className:"text-center text-gray-400",children:"No PDF selected"})})]})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Features"}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:[N.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border bg-gray-50 p-3",children:(C==null?void 0:C.length)>0?e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:C.map(s=>e.jsxs("div",{className:"flex items-center rounded border bg-white p-2 transition-colors hover:bg-blue-50",children:[e.jsx("input",{type:"checkbox",id:`feature-${s._id}`,checked:N.includes(s._id),onChange:r=>{r.target.checked?$([...N,s._id]):$(N.filter(l=>l!==s._id))},className:"mr-3 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:`feature-${s._id}`,className:"flex-1 cursor-pointer text-sm text-gray-700",children:s.name||s.title})]},s._id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"No features available"})})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Short Features"}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:[y.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border bg-gray-50 p-3",children:(F==null?void 0:F.length)>0?e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:F.map(s=>e.jsxs("div",{className:"flex items-center rounded border bg-white p-2 transition-colors hover:bg-green-50",children:[e.jsx("input",{type:"checkbox",id:`shortFeature-${s._id}`,checked:y.includes(s._id),onChange:r=>{r.target.checked?V([...y,s._id]):V(y.filter(l=>l!==s._id))},className:"mr-3 h-4 w-4 rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("label",{htmlFor:`shortFeature-${s._id}`,className:"flex-1 cursor-pointer text-sm text-gray-700",children:s.name||s.title})]},s._id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"No short features available"})})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Related Kits"}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:[w.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border bg-gray-50 p-3",children:(A==null?void 0:A.length)>0?e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:A.map(s=>e.jsxs("div",{className:"flex items-center rounded border bg-white p-2 transition-colors hover:bg-purple-50",children:[e.jsx("input",{type:"checkbox",id:`kit-${s._id}`,checked:w.includes(s._id),onChange:r=>{r.target.checked?z([...w,s._id]):z(w.filter(l=>l!==s._id))},className:"mr-3 h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:`kit-${s._id}`,className:"flex-1 cursor-pointer text-sm text-gray-700",children:s.name})]},s._id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"No kits available"})})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Specifications"}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("label",{className:"mb-1 ml-2 block w-[48%] text-sm font-medium text-gray-700",children:"Title"}),e.jsx("label",{className:"mb-1 block w-[50%] text-sm font-medium text-gray-700",children:"Description"})]}),p.map((s,r)=>e.jsxs("div",{className:"mb-3 flex gap-3 rounded border p-3",children:[e.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{children:e.jsx("textarea",{placeholder:"Specification Title",value:s.title,onChange:l=>{const n=[...p];n[r].title=l.target.value,j(n)},className:"w-full rounded border p-2",rows:2})}),e.jsx("div",{children:e.jsx("textarea",{placeholder:"Specification Description",value:s.description,onChange:l=>{const n=[...p];n[r].description=l.target.value,j(n)},className:"w-full rounded border p-2",rows:2})})]}),e.jsx("button",{type:"button",onClick:()=>{j(p.filter((l,n)=>n!==r))},className:"text-red-500 hover:text-red-700",children:e.jsx(Qe,{className:"h-7 w-7"})})]},r)),e.jsx("button",{type:"button",onClick:()=>j([...p,{title:"",description:""}]),className:"mt-2 rounded bg-blue-500 px-3 py-1 text-white",children:"Add Specification"})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"FAQ"}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("label",{className:"mb-1 ml-2 block w-[48%] text-sm font-medium text-gray-700",children:"Question"}),e.jsx("label",{className:"mb-1 block w-[50%] text-sm font-medium text-gray-700",children:"Answer"})]}),g.map((s,r)=>e.jsxs("div",{className:"mb-3 flex gap-3 rounded border p-3",children:[e.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{children:e.jsx("textarea",{placeholder:"Question",value:s.question,onChange:l=>{const n=[...g];n[r].question=l.target.value,v(n)},className:"w-full rounded border p-2",rows:2})}),e.jsx("div",{children:e.jsx("textarea",{placeholder:"Answer",value:s.answer,onChange:l=>{const n=[...g];n[r].answer=l.target.value,v(n)},className:"w-full rounded border p-2",rows:2})})]}),e.jsx("button",{type:"button",onClick:()=>{v(g.filter((l,n)=>n!==r))},className:"text-red-500 hover:text-red-700",children:e.jsx(Qe,{className:"h-7 w-7"})})]},r)),e.jsx("button",{type:"button",onClick:()=>v([...g,{question:"",answer:""}]),className:"mt-2 rounded bg-blue-500 px-3 py-1 text-white",children:"Add FAQ"})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Disclaimer"}),e.jsx("textarea",{value:xe,onChange:s=>he(s.target.value),placeholder:"Enter product disclaimer",className:"w-full rounded border p-2",rows:4})]}),e.jsx(ss,{details:M,setDetails:ce}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:ze,type:"submit",disabled:Ne&&"disabled",className:"rounded bg-primary px-10 py-2 text-base-100",children:Ne?"Loading...":"Add Product"})})]})]})]})}export{os as default};
