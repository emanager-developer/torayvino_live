import{y as qe,p as t,c6 as Ae,c7 as De,c8 as Qe,Z as Ie,j as e,c9 as ye,Q as c}from"./index-f981d823.js";import{T as Te,G as Be,P as Ve,a as $e,V as Ee,F as Ge,D as Re}from"./Details-99f280bf.js";import{B as ze}from"./Bundle-ce039579.js";import"./brandApi-d50b0447.js";import"./subCategoryApi-75905068.js";import"./subSubCategoryApi-83220bb9.js";import"./colorApi-fead5e16.js";function Ue(){var ue;const ve=qe(),[m,G]=t.useState([]),[x,R]=t.useState([]),[i,F]=t.useState([]),[z,M]=t.useState(""),[H,K]=t.useState(null),[_,L]=t.useState(null),[P,J]=t.useState(null),[we,O]=t.useState(null),[q,y]=t.useState(0),[A,v]=t.useState(0),[Se,Z]=t.useState(0),[U,W]=t.useState(!1),[D,X]=t.useState(""),[Y,ee]=t.useState(""),[p,ke]=t.useState(!1),[n,se]=t.useState([]),[h,te]=t.useState([]),[o,g]=t.useState([{title:"",description:""}]),[b,Q]=t.useState([]),[f,I]=t.useState([]),[u,j]=t.useState([{question:"",answer:""}]),[ae,re]=t.useState(""),[N,T]=t.useState([]),[w,le]=t.useState(!1),[de,ne]=t.useState(0),[ie,ce]=t.useState(0);t.useEffect(()=>{var s;p&&(n==null?void 0:n.length)>0?(y(((s=n[0])==null?void 0:s.price)||0),v(n==null?void 0:n.reduce((l,r)=>l+(Number(r.stock)||0),0))):(y(0),v(0))},[p,n]);const[Ce,{isLoading:oe}]=Ae(),{data:B}=De(),{data:V}=Qe(),{data:$}=Ie(),S=(B==null?void 0:B.data)||[],k=(V==null?void 0:V.data)||[],C=($==null?void 0:$.data)||[],Fe=async s=>{var me,xe,pe,he,ge,be,fe,je,Ne;if(s.preventDefault(),(m==null?void 0:m.length)<=0)return c.warning("Thumbnail is required");if(!z)return c.warning("Title is required");if(!_)return c.warning("Category is required");if(!q)return c.warning("Price is required");if(!A)return c.warning("Stock is required");if(!D)return c.warning("Description is required");const l={title:z,brand:we,price:q,stock:A,discount:Se,featured:U,description:D,isVariant:p,variants:n,tags:Y,specifications:o.filter(d=>d.title&&d.description),feature:b,shortFeature:f,faq:u.filter(d=>d.question&&d.answer),disclaimer:ae,kits:N,isBundle:w,bundlePurchaseQuantity:w?de:0,bundleQuantity:w?ie:0};l.category=_,P&&(l.subCategory=P),H&&(l.subSubCategory=H);const r=new FormData;r.append("thumbnail",(me=m[0])==null?void 0:me.file),(x==null?void 0:x.length)>0&&x.forEach(d=>r.append("gallery",d.file)),(i==null?void 0:i.length)>0&&r.append("productManual",(xe=i[0])==null?void 0:xe.file),(h==null?void 0:h.length)>0&&h.forEach((d,_e)=>{if((d==null?void 0:d.length)>0){const E=d[0].file,Pe=new File([E],`variant-${_e}-${E.name}`,{type:E.type});r.append("variantImages",Pe)}}),r.append("data",JSON.stringify(l));const a=await Ce(r);(pe=a==null?void 0:a.data)!=null&&pe.success?(c.success("Product added successfully"),G([]),R([]),F([]),M(""),L(""),J(""),K(""),O(""),Z(""),y(""),v(""),W(!1),se(""),X(""),ee(""),g([{title:"",description:""}]),Q([]),I([]),j([{question:"",answer:""}]),re(""),T([]),te([]),le(!1),ne(0),ce(0),ve("/admin/product/all-products")):(c.error(((be=(ge=(he=a==null?void 0:a.error)==null?void 0:he.data)==null?void 0:ge.error)==null?void 0:be.length)>0?(Ne=(je=(fe=a==null?void 0:a.error)==null?void 0:fe.data)==null?void 0:je.error[0])==null?void 0:Ne.message:"Failed to add product"),console.log(a))};return e.jsxs("div",{className:"add_product rounded bg-base-100 shadow",children:[e.jsx("h3",{className:"border-b p-4 text-lg font-medium text-neutral",children:"Add Product"}),e.jsxs("div",{className:"p-3 text-neutral-content",children:[e.jsx(Te,{thumbnail:m,setThumbnail:G}),e.jsx(Be,{galleries:x,setGalleries:R}),e.jsxs("div",{className:"form_group mt-3",children:[e.jsx(Ve,{setTitle:M,categoryId:_,setCategoryId:L,subCategoryId:P,setSubCategoryId:J,setSubSubCategoryId:K,setBrand:O}),e.jsx($e,{price:q,setPrice:y,setDiscount:Z,stock:A,setStock:v,isVariant:p}),e.jsx(Ee,{isVariant:p,setIsVariant:ke,variants:n,setVariants:se,variantImages:h,setVariantImages:te}),e.jsx(Ge,{featured:U,setFeatured:W}),e.jsx(ze,{isBundle:w,setIsBundle:le,bundlePurchaseQuantity:de,setBundlePurchaseQuantity:ne,bundleQuantity:ie,setBundleQuantity:ce}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("label",{className:"mb-2 block text-sm",children:["Tags ",e.jsx("small",{children:"(; separated)"})]}),e.jsx("textarea",{value:Y,onChange:s=>ee(s.target.value),placeholder:"Enter tags separated by semicolons (;)",className:"w-full rounded border p-2",rows:5})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("p",{className:"mb-2 text-sm",children:"Product Manual (PDF)"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 rounded border border-dashed p-3",children:[e.jsx("input",{type:"file",accept:".pdf",onChange:s=>{s.target.files&&s.target.files[0]&&F([{file:s.target.files[0],name:s.target.files[0].name}])},className:"hidden",id:"pdf-upload"}),e.jsx("label",{htmlFor:"pdf-upload",className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose PDF File"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop PDF here"})]}),e.jsx("div",{className:"rounded border border-dashed p-3",children:(i==null?void 0:i.length)>0?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm text-neutral-content",children:(ue=i[0])==null?void 0:ue.name})]}),e.jsx("button",{type:"button",onClick:()=>F([]),className:"text-red-500 hover:text-red-700",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}):e.jsx("p",{className:"text-center text-gray-400",children:"No PDF selected"})})]})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Features"}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:[b.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border bg-gray-50 p-3",children:(S==null?void 0:S.length)>0?e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:S.map(s=>e.jsxs("div",{className:"flex items-center rounded border bg-white p-2 transition-colors hover:bg-blue-50",children:[e.jsx("input",{type:"checkbox",id:`feature-${s._id}`,checked:b.includes(s._id),onChange:l=>{l.target.checked?Q([...b,s._id]):Q(b.filter(r=>r!==s._id))},className:"mr-3 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:`feature-${s._id}`,className:"flex-1 cursor-pointer text-sm text-gray-700",children:s.name||s.title})]},s._id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"No features available"})})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Short Features"}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:[f.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border bg-gray-50 p-3",children:(k==null?void 0:k.length)>0?e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:k.map(s=>e.jsxs("div",{className:"flex items-center rounded border bg-white p-2 transition-colors hover:bg-green-50",children:[e.jsx("input",{type:"checkbox",id:`shortFeature-${s._id}`,checked:f.includes(s._id),onChange:l=>{l.target.checked?I([...f,s._id]):I(f.filter(r=>r!==s._id))},className:"mr-3 h-4 w-4 rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("label",{htmlFor:`shortFeature-${s._id}`,className:"flex-1 cursor-pointer text-sm text-gray-700",children:s.name||s.title})]},s._id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"No short features available"})})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Related Kits"}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:[N.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border bg-gray-50 p-3",children:(C==null?void 0:C.length)>0?e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:C.map(s=>e.jsxs("div",{className:"flex items-center rounded border bg-white p-2 transition-colors hover:bg-purple-50",children:[e.jsx("input",{type:"checkbox",id:`kit-${s._id}`,checked:N.includes(s._id),onChange:l=>{l.target.checked?T([...N,s._id]):T(N.filter(r=>r!==s._id))},className:"mr-3 h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:`kit-${s._id}`,className:"flex-1 cursor-pointer text-sm text-gray-700",children:s.name})]},s._id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"No kits available"})})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Specifications"}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("label",{className:"mb-1 ml-2 block w-[48%] text-sm font-medium text-gray-700",children:"Title"}),e.jsx("label",{className:"mb-1 block w-[50%] text-sm font-medium text-gray-700",children:"Description"})]}),o.map((s,l)=>e.jsxs("div",{className:"mb-3 flex gap-3 rounded border p-3",children:[e.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{children:e.jsx("textarea",{placeholder:"Specification Title",value:s.title,onChange:r=>{const a=[...o];a[l].title=r.target.value,g(a)},className:"w-full rounded border p-2",rows:2})}),e.jsx("div",{children:e.jsx("textarea",{placeholder:"Specification Description",value:s.description,onChange:r=>{const a=[...o];a[l].description=r.target.value,g(a)},className:"w-full rounded border p-2",rows:2})})]}),e.jsx("button",{type:"button",onClick:()=>{g(o.filter((r,a)=>a!==l))},className:"text-red-500 hover:text-red-700",children:e.jsx(ye,{className:"h-7 w-7"})})]},l)),e.jsx("button",{type:"button",onClick:()=>g([...o,{title:"",description:""}]),className:"mt-2 rounded bg-blue-500 px-3 py-1 text-white",children:"Add Specification"})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"FAQ"}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("label",{className:"mb-1 ml-2 block w-[48%] text-sm font-medium text-gray-700",children:"Question"}),e.jsx("label",{className:"mb-1 block w-[50%] text-sm font-medium text-gray-700",children:"Answer"})]}),u.map((s,l)=>e.jsxs("div",{className:"mb-3 flex gap-3 rounded border p-3",children:[e.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{children:e.jsx("textarea",{placeholder:"Question",value:s.question,onChange:r=>{const a=[...u];a[l].question=r.target.value,j(a)},className:"w-full rounded border p-2",rows:2})}),e.jsx("div",{children:e.jsx("textarea",{placeholder:"Answer",value:s.answer,onChange:r=>{const a=[...u];a[l].answer=r.target.value,j(a)},className:"w-full rounded border p-2",rows:2})})]}),e.jsx("button",{type:"button",onClick:()=>{j(u.filter((r,a)=>a!==l))},className:"text-red-500 hover:text-red-700",children:e.jsx(ye,{className:"h-7 w-7"})})]},l)),e.jsx("button",{type:"button",onClick:()=>j([...u,{question:"",answer:""}]),className:"mt-2 rounded bg-blue-500 px-3 py-1 text-white",children:"Add FAQ"})]}),e.jsxs("div",{className:"mt-3 rounded border p-4",children:[e.jsx("label",{className:"mb-2 block text-sm",children:"Disclaimer"}),e.jsx("textarea",{value:ae,onChange:s=>re(s.target.value),placeholder:"Enter product disclaimer",className:"w-full rounded border p-2",rows:4})]}),e.jsx(Re,{details:D,setDetails:X}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:Fe,type:"submit",disabled:oe&&"disabled",className:"rounded bg-primary px-10 py-2 text-base-100",children:oe?"Loading...":"Add Product"})})]})]})]})}export{Ue as default};
