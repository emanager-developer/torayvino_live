import{v as L,m as k,b0 as q,b9 as E,j as e,am as F,an as O,Q as l}from"./index-e0eec1b4.js";function R(){var g,x;const A=L(),[t,m]=k.useState([]),{data:s}=q(),[D,{isLoading:u}]=E(),I=(g=s==null?void 0:s.data)!=null&&g.length?((x=s==null?void 0:s.data)==null?void 0:x.length)+1:1,S=async r=>{var p,h,j,y,f,N,b,v,C,w,_;r.preventDefault();let n=(p=t[0])==null?void 0:p.file;const o=r.target.name.value,c=Number(r.target.order.value);if(!n)return l.error("Icon is required");if(o==="")return l.error("category name is required");const d={name:o,order:c},i=new FormData;i.append("image",n),i.append("data",JSON.stringify(d));const a=await D(i);(h=a==null?void 0:a.data)!=null&&h.success?(l.success("Category added successfully"),m([]),A("/admin/category/categories")):(l.error(`${((N=(f=(y=(j=a==null?void 0:a.error)==null?void 0:j.data)==null?void 0:y.error)==null?void 0:f[0])==null?void 0:N.message)||((C=(v=(b=a==null?void 0:a.error)==null?void 0:b.data)==null?void 0:v.error)==null?void 0:C.message)||((_=(w=a==null?void 0:a.error)==null?void 0:w.data)==null?void 0:_.message)||"Something went wrong!"}`),console.log(a))};return e.jsxs("form",{onSubmit:S,className:"rounded bg-base-100 p-4 xl:w-1/2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-content",children:"Icon"}),e.jsx(F,{value:t,onChange:r=>m(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:n,dragProps:o})=>e.jsxs("div",{className:"w-max rounded border border-dashed p-4",...o,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(t==null?void 0:t.length)>0&&"mt-4"} `,children:t==null?void 0:t.map((c,d)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>n(d),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(O,{})})]},d))})]})})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{className:"text-neutral-content",children:"Category name"}),e.jsx("input",{type:"text",name:"name"})]}),e.jsxs("div",{className:"form_group mt-2",children:[e.jsx("p",{className:"text-neutral-content",children:"Category Order"}),e.jsx("input",{type:"number",defaultValue:I,name:"order"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"primary_btn text-sm",disabled:u&&"disabled",children:u?"Loading..":"Add category"})})]})}export{R as default};
